<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="esy">
    
    <meta name="description" content="miao">
    
    
    
    
    
    
    <title>chatbot_版本1总结 | ESY</title>
    <link href="https://esyyes.github.io" rel="prefetch" />

    <link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/aos.css">
<link rel="stylesheet" href="/css/style.css">
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/aos.js"></script>
    <script src="/js/highslide/highslide-full.min.js"></script>
    <link rel="stylesheet" href="/js/highslide/highslide.css">
    <style type="text/css">
        @media (max-width: 768px) {
            body {
                background-color: #f0f0f0;
                background: url('/imgs/xsbg.gif');
                background-attachment: fixed;
            }
        }
    </style>
    
    <!--<script type="text/javascript">
      if (document.images) {
        var avatar = new Image();
        avatar.src = '/imgs/avatar.jpg'
        var previews = 'preview1.jpg,preview2.jpg,preview3.jpg,preview4.jpg'.split(',')
        var previewsPreLoad = []
        for(var i = 0; i < length; i++) {
          previewsPreLoad.push(new Image())
          previewsPreLoad[previewsPreLoad.length - 1].src = '/imgs/preview' + previews[i]
        }
      }
    </script>-->
<link rel="alternate" href="/atom.xml" title="ESY" type="application/atom+xml">
</head>
<body>
    <!-- 背景轮播图功能 -->
    <section class="hidden-xs">
    <ul class="cb-slideshow">
        <li><span>天若</span></li>
        <li><span>有情</span></li>
        <li><span>天亦老</span></li>
        <li><span>我为</span></li>
        <li><span>长者</span></li>
        <li><span>续一秒</span></li>
    </ul>
</section>
    <!-- 欧尼酱功能, 谁用谁知道 -->
    
    <div class="gal-menu gal-dropdown">
    <div class="circle" id="gal">
        <div class="ring">
            <a href="https://esyyes.github.io" class="menuItem" style="left: 50%; top: 15%;">首页</a>
            
            <a class="menuItem" style="left: 80.3109%; top: 32.5%;">下一页</a>
            
            <a href="/archives" class="menuItem" style="left: 80.3109%; top: 67.5%;">归档</a>
            <a href="/about" class="menuItem" style="left: 50%; top: 85%;">关于</a>
            <a href="/message" class="menuItem" style="left: 19.6891%; top: 67.5%;">留言板</a>

            
            <a class="menuItem" style="left: 19.6891%; top: 32.5%;">上一页</a>
            
        </div>
        <audio id="audio" src="/imgs/oni.mp3"></audio>
    </div>
</div>
    
    <header class="navbar navbar-inverse" id="gal-header">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed"
                    data-toggle="collapse" data-target=".bs-navbar-collapse"
                    aria-expanded="false">
                <span class="fa fa-lg fa-reorder"></span>
            </button>
            <a href="https://esyyes.github.io">
                
                <style>
                    #gal-header .navbar-brand {
                        height: 54px;
                        line-height: 24px;
                        font-size: 28px;
                        opacity: 1;
                        background-color: rgba(0,0,0,0);
                        text-shadow: 0 0 5px #fff,0 0 10px #fff,0 0 15px #fff,0 0 20px #228DFF,0 0 35px #228DFF,0 0 40px #228DFF,0 0 50px #228DFF,0 0 75px #228DFF;
                    }
                </style>
                <!-- 这里使用文字(navbar_text or config.title) -->
                <div class="navbar-brand">ESY</div>
                
            </a>
        </div>
        <div class="collapse navbar-collapse bs-navbar-collapse">
            <ul class="nav navbar-nav" id="menu-gal">
                
                
                <li class="">
                    <a href="/">
                        <i class="fa fa-home"></i>首页
                    </a>
                </li>
                
                
                
                <li class="">
                    <a href="/archives">
                        <i class="fa fa-archive"></i>归档
                    </a>
                </li>
                
                
                
                
                <li class="dropdown">
                    <!-- TODO 添加hover dropdown效果 -->
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false" data-hover="dropdown">
                        <i class="fa fa-list"></i>分类
                    </a>
                    <ul class="dropdown-menu">
                        
                        
                        <li>
                            <a href="/categories/work/">work</a>
                        </li>
                        
                        <li>
                            <a href="/categories/hexo/">hexo</a>
                        </li>
                        
                        <li>
                            <a href="/categories/hexo%E5%AE%8C%E5%96%84/">-hexo完善</a>
                        </li>
                        
                        <li>
                            <a href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a>
                        </li>
                        
                        <li>
                            <a href="/categories/%E5%8D%87%E7%BA%A7conda/">-升级conda</a>
                        </li>
                        
                        <li>
                            <a href="/categories/%E5%B7%A5%E4%BD%9C/">-工作</a>
                        </li>
                        
                        
                        <li>
                            <a href="/categories">...</a>
                        </li>
                        
                        
                    </ul>
                </li>
                
                
                
                
                
                <li class="dropdown">
                    <!-- TODO 添加hover dropdown效果 -->
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false" data-hover="dropdown">
                        <i class="fa fa-tags"></i>标签
                    </a>
                    <ul class="dropdown-menu">
                        
                        
                        <li>
                            <a href="/tags/work/">work</a>
                        </li>
                        
                        <li>
                            <a href="/tags/hexo/">hexo</a>
                        </li>
                        
                        <li>
                            <a href="/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">-个人博客搭建</a>
                        </li>
                        
                        <li>
                            <a href="/tags/python/">-python</a>
                        </li>
                        
                        <li>
                            <a href="/tags/malab-%E6%AF%95%E4%B8%9A/">-malab -毕业</a>
                        </li>
                        
                        <li>
                            <a href="/tags/python-%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">-python -人工智能</a>
                        </li>
                        
                        
                        <li>
                            <a href="/tags">...</a>
                        </li>
                        
                        
                    </ul>
                </li>
                
                
                
                
                <li class="">
                    <a href="/about">
                        <i class="fa fa-user"></i>关于我
                    </a>
                </li>
                
                
            </ul>
        </div>
    </div>
</header>
    <div id="gal-body">
        <div class="container">
            <div class="row">
                <div class="col-md-8 gal-right" id="mainstay">
                    
<article class="article well article-body" id="article">
    <div class="breadcrumb">
        <i class="fa fa-home"></i>
        <a href="https://esyyes.github.io">ESY</a>
        >
        <span>chatbot_版本1总结</span>
    </div>
    <!-- 大型设备详细文章 -->
    <div class="hidden-xs">
        <div class="title-article">
            <h1>
                <a href="/2020/08/08/chatbot-%E7%89%88%E6%9C%AC1%E6%80%BB%E7%BB%93/">chatbot_版本1总结</a>
            </h1>
        </div>
        <div class="tag-article">
            
            <span class="label label-gal">
                <i class="fa fa-tags"></i>
                
                <a href="/tags/work/">work</a>
                
            </span>
            
            <span class="label label-gal">
                <i class="fa fa-calendar"></i> 2020-08-08
            </span>
            
        </div>
    </div>
    <!-- 小型设备详细文章 -->
    <div class="visible-xs">
        <center>
            <div class="title-article">
                <h4>
                    <a href="/2020/08/08/chatbot-%E7%89%88%E6%9C%AC1%E6%80%BB%E7%BB%93/">chatbot_版本1总结</a>
                </h4>
            </div>
            <p>
                <i class="fa fa-calendar"></i> 2020-08-08
            </p>
            <p>
                
                <i class="fa fa-tags"></i>
                
                <a href="/tags/work/">work</a>
                
                
                
            </p>
        </center>
    </div>
    <div class="content-article">
        <h1 id="chatbot-版本1总结"><a href="#chatbot-版本1总结" class="headerlink" title="chatbot_版本1总结"></a>chatbot_版本1总结</h1><p>检索式聊天机器人之旅游篇</p>
<p>数据：100条，数据匮乏，很多语句输出是错误的</p>
<p>流程：</p>
<ol>
<li>对数据库中的数据进行spacy分词，还原，消除停靠词处理</li>
<li>利用规则语句输出一些简单的话</li>
<li>判断小于3个或者关键词不在数据中的，就输出sorry</li>
<li>利用tf-idf计算，然后将输入问题的关键词跟对应句子的进行得分计算</li>
<li>召回5个问题</li>
<li>计算相似度</li>
<li>利用自己写的余弦相似度和spacy自带的余弦相似度计算</li>
<li>输出相似度高于0.7且相似度最高的答案</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/7/29</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> en_core_web_md</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">warnings.filterwarnings(<span class="string">"ignore"</span>)</span><br><span class="line">nlp = en_core_web_md.load()</span><br><span class="line">greeting_output = [<span class="string">"hi"</span>, <span class="string">"hey"</span>, <span class="string">"hello"</span>, <span class="string">"I'm glad! You are talking to me"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 预处理文本数据，将单词还原成基础模式，小写，删除停靠词，得到关键词</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">del_stop</span><span class="params">(text)</span>:</span></span><br><span class="line">    token_doc = [token.lemma_ <span class="keyword">for</span> token <span class="keyword">in</span> nlp(text)]</span><br><span class="line">    <span class="comment"># 去除停用词后创建单词列表</span></span><br><span class="line">    filtered_sentence = []</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> token_doc:</span><br><span class="line">        lexeme = nlp.vocab[word]</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> lexeme.is_stop != <span class="literal">False</span>:</span><br><span class="line">            filtered_sentence.append(word)</span><br><span class="line">    <span class="keyword">return</span> filtered_sentence</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算tfidf得分</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">QA_tf_idf</span><span class="params">(data, filtered_sentence)</span>:</span></span><br><span class="line">    question = np.array(data[<span class="string">'Question'</span>]).tolist()</span><br><span class="line">    <span class="comment"># 去除停用词后创建单词列表</span></span><br><span class="line">    list_key = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(data)):</span><br><span class="line">        list_key.append(del_stop(question[i]))</span><br><span class="line">    <span class="comment"># 统计词频和词汇,看单词出现的次数</span></span><br><span class="line">    doc_frequency = defaultdict(int)</span><br><span class="line">    list_words = list_key</span><br><span class="line">    <span class="keyword">for</span> word_list <span class="keyword">in</span> list_words:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> word_list:</span><br><span class="line">            doc_frequency[i] += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    doc_frequency2 = defaultdict(int)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> filtered_sentence:</span><br><span class="line">        doc_frequency2[i] += <span class="number">1</span></span><br><span class="line">    <span class="comment"># doc_frequency.update(&#123;'-PRON-': doc_frequency.pop('-pron-')&#125;)</span></span><br><span class="line">    l1 = set(doc_frequency2.keys())</span><br><span class="line">    l2 = set(doc_frequency.keys())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> len(l1 &amp; l2) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># 计算每个词的IDF值</span></span><br><span class="line">        word_idf = &#123;&#125;  <span class="comment"># 存储每个词的idf值</span></span><br><span class="line">        word_doc = defaultdict(int)  <span class="comment"># 存储包含该词的文档数</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> doc_frequency:</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> list_words:</span><br><span class="line">                <span class="keyword">if</span> i <span class="keyword">in</span> j:</span><br><span class="line">                    word_doc[i] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> doc_frequency:</span><br><span class="line">            word_idf[i] = math.log(len(list_key) / (word_doc[i] + <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 对样本进行词频统计</span></span><br><span class="line">        list_doc = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(list_key)):</span><br><span class="line">            doc_frequency1 = defaultdict(int)</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> list_key[i]:</span><br><span class="line">                doc_frequency1[j] += <span class="number">1</span></span><br><span class="line">            list_doc.append(doc_frequency1)</span><br><span class="line">        <span class="comment"># 计算语料库中每个词的tf_idf,构建向量</span></span><br><span class="line">        tf_idf = []</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(data)):</span><br><span class="line">            tf_idf.append([word_idf[i] * list_doc[j][i] / len(list_key[j]) <span class="keyword">for</span> i <span class="keyword">in</span> (list_doc[j])])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 计算问题对应语料库的tf-idf得分</span></span><br><span class="line">        scores = []</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(data)):</span><br><span class="line">            score = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> doc_frequency2:</span><br><span class="line">                <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> doc_frequency:</span><br><span class="line">                    <span class="keyword">pass</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    score += (word_idf[i] * list_doc[j][i] / len(list_key[j]))</span><br><span class="line">            scores.append(score)</span><br><span class="line">        <span class="comment"># 直接计算问题的语料库得分</span></span><br><span class="line">        <span class="comment"># 对问题进行词频统计</span></span><br><span class="line"></span><br><span class="line">        quet_tfidf = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> doc_frequency2:</span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> doc_frequency:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                quet_tfidf.append(word_idf[i] * doc_frequency2[i] / len(filtered_sentence))</span><br><span class="line">        <span class="keyword">return</span> tf_idf, quet_tfidf, scores</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">recall_5</span><span class="params">(scores, data, tf_idf)</span>:</span></span><br><span class="line">    question = np.array(data[<span class="string">'Question'</span>]).tolist()</span><br><span class="line">    answer = np.array(data[<span class="string">'Answer'</span>]).tolist()</span><br><span class="line">    <span class="comment"># 用字典形式按照升序形式排序</span></span><br><span class="line">    x = np.arange(len(data)).tolist()</span><br><span class="line">    dict_score = dict(zip(x, scores))</span><br><span class="line">    listc = sorted(zip(dict_score.values(), dict_score.keys()))</span><br><span class="line">    recall_ques = []</span><br><span class="line">    recall_answ = []</span><br><span class="line">    recall_tf_idf = []</span><br><span class="line">    <span class="comment"># 召回得分最高的5个问题</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">6</span>):</span><br><span class="line">        recall_ques.append(question[listc[-i][<span class="number">1</span>]])</span><br><span class="line">        recall_answ.append(answer[listc[-i][<span class="number">1</span>]])</span><br><span class="line">        recall_tf_idf.append(tf_idf[listc[-i][<span class="number">1</span>]])</span><br><span class="line">    <span class="keyword">return</span> recall_ques, recall_answ, recall_tf_idf</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 求5个问题的相似度</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">similar_list</span><span class="params">(quet_tfidf, recall_tf_idf)</span>:</span></span><br><span class="line">    similar_score = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(recall_tf_idf)):</span><br><span class="line">        <span class="keyword">if</span> len(recall_tf_idf[i]) == len(quet_tfidf):</span><br><span class="line">            similar_score.append(np.dot(quet_tfidf, recall_tf_idf[i]) / (np.linalg.norm(quet_tfidf) * np.linalg.norm(recall_tf_idf[i])))</span><br><span class="line">        <span class="keyword">elif</span> len(recall_tf_idf[i]) &lt; len(quet_tfidf):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(len(quet_tfidf) - len(recall_tf_idf[i])):</span><br><span class="line">                c = recall_tf_idf[i]</span><br><span class="line">                c.append(<span class="number">0</span>)</span><br><span class="line">            similar_score.append(np.dot(quet_tfidf, c) / (np.linalg.norm(quet_tfidf) * np.linalg.norm(recall_tf_idf[i])))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(abs(len(quet_tfidf) - len(recall_tf_idf[i]))):</span><br><span class="line">                a = quet_tfidf</span><br><span class="line">                a.append(<span class="number">0</span>)</span><br><span class="line">            similar_score.append(np.dot(a, recall_tf_idf[i]) / (np.linalg.norm(a) * np.linalg.norm(recall_tf_idf[i])))</span><br><span class="line">    <span class="keyword">return</span> similar_score</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">similar_spacy</span><span class="params">(text, recall_ques)</span>:</span></span><br><span class="line">    similar_goal = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(recall_ques)):</span><br><span class="line">        similar_goal.append(nlp(text).similarity(nlp(recall_ques[i])))</span><br><span class="line">    <span class="keyword">return</span> similar_goal</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出相似度最高的那个的答案</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">best_answer</span><span class="params">(list_num, recall_answ)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> max(list_num) &lt;= <span class="number">0.5</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f"I'm sorry. I don't understand you"</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        best_ans = recall_answ[list_num.index(max(list_num))]</span><br><span class="line">        <span class="keyword">return</span> best_ans</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_chatbot</span><span class="params">(text2, data)</span>:</span></span><br><span class="line">    text1 = <span class="string">" "</span>.join([token.lemma_ <span class="keyword">for</span> token <span class="keyword">in</span> nlp(text2)])</span><br><span class="line">    <span class="keyword">if</span> text1 == <span class="string">'hey'</span> <span class="keyword">or</span> text1 == <span class="string">'hi'</span> <span class="keyword">or</span> text1 == <span class="string">'hello'</span> <span class="keyword">or</span> text1 == <span class="string">'HI'</span>:</span><br><span class="line">        <span class="keyword">return</span> random.choice(greeting_output)</span><br><span class="line">    <span class="keyword">elif</span> text1 == <span class="string">'thank'</span> <span class="keyword">or</span> text1 == <span class="string">'thank -PRON-'</span> <span class="keyword">or</span> text1 == <span class="string">'THANK'</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'You are welcome.'</span></span><br><span class="line">    <span class="keyword">elif</span> text1 == <span class="string">'bye'</span> <span class="keyword">or</span> text1 == <span class="string">'BYE'</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Bye!'</span></span><br><span class="line">    <span class="keyword">elif</span> len(text1.split()) &lt; <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"I'm sorry. I don't understand you"</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> QA_tf_idf(data, del_stop(text2)) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"I'm sorry. I don't understand you"</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            tf_idf1, quet_tfidf1, scores1 = QA_tf_idf(data, del_stop(text2))</span><br><span class="line">            recall_ques1, recall_answ1, recall_tf_idf_1 = recall_5(scores1, data, tf_idf1)</span><br><span class="line">            <span class="keyword">return</span> best_answer(similar_spacy(text2, recall_ques1), recall_answ1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_chatbot_python</span><span class="params">(text2, data)</span>:</span></span><br><span class="line">    text1 = <span class="string">" "</span>.join([token.lemma_ <span class="keyword">for</span> token <span class="keyword">in</span> nlp(text2)])</span><br><span class="line">    <span class="comment"># 进行简单回复</span></span><br><span class="line">    <span class="keyword">if</span> text1 == <span class="string">'hey'</span> <span class="keyword">or</span> text1 == <span class="string">'hi'</span> <span class="keyword">or</span> text1 == <span class="string">'hello'</span> <span class="keyword">or</span> text1 == <span class="string">'HI'</span>:</span><br><span class="line">        print(random.choice(greeting_output))</span><br><span class="line">    <span class="keyword">elif</span> text1 == <span class="string">'thank'</span> <span class="keyword">or</span> text1 == <span class="string">'thank -PRON-'</span> <span class="keyword">or</span> text1 == <span class="string">'THANK'</span>:</span><br><span class="line">        print(<span class="string">'You are welcome.'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">elif</span> len(text1.split()) &lt; <span class="number">3</span>:</span><br><span class="line">        print(<span class="string">f"I'm sorry. I don't understand you"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> QA_tf_idf(data, del_stop(text2)) == <span class="number">0</span>:</span><br><span class="line">            print(<span class="string">f"I'm sorry. I don't understand you"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            tf_idf1, quet_tfidf1, scores1 = QA_tf_idf(data, del_stop(text2))</span><br><span class="line">            recall_ques1, recall_answ1, recall_tf_idf_1 = recall_5(scores1, data, tf_idf1)</span><br><span class="line">            print(<span class="string">f'召回的5个问题'</span>)</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">                print(<span class="string">f'第<span class="subst">&#123;j + <span class="number">1</span>&#125;</span>问题：<span class="subst">&#123;recall_ques1[j]&#125;</span>'</span>, end=<span class="string">'\t'</span>)</span><br><span class="line">                print(<span class="string">f'相似度：<span class="subst">&#123;similar_spacy(text2, recall_ques1)[j]&#125;</span>'</span>)</span><br><span class="line">            print(<span class="string">f'最佳答案：'</span>)</span><br><span class="line">            print(<span class="string">f'<span class="subst">&#123;best_answer(similar_spacy(text2, recall_ques1), recall_answ1)&#125;</span>'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="运行python"><a href="#运行python" class="headerlink" title="运行python"></a>运行python</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/7/29</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> chatbot_gui <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">data = pd.read_csv(<span class="string">'Q&amp;A pairs.csv'</span>)</span><br><span class="line">print(<span class="string">"Hello, I'm a question-and-answer chatbot for the tourism domain based on retrieval mode."</span></span><br><span class="line">      <span class="string">"If you want to exit, input 'Bye'!"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    text = input(<span class="string">"Please enter a question: \t"</span>)</span><br><span class="line">    <span class="keyword">if</span> text == <span class="string">'bye'</span> <span class="keyword">or</span> text == <span class="string">'BYE'</span>:</span><br><span class="line">        print(<span class="string">'Bye!'</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        run_chatbot_python(text, data)</span><br></pre></td></tr></table></figure>

<h2 id="生成简单的gui界面"><a href="#生成简单的gui界面" class="headerlink" title="生成简单的gui界面"></a>生成简单的gui界面</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/7/21</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> tkinter</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> chatbot_gui <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data = pd.read_excel(<span class="string">'Q&amp;A pairs.xlsx'</span>)</span><br><span class="line">hello = <span class="string">"Nice to meet you! My name is BoBo. I'm glad to answer any questions about traveling in Beijing! How can I help you? "</span> + <span class="string">'\n'</span></span><br><span class="line">questionlist = [<span class="string">"If you have the following questions, please enter the number directly: "</span>,</span><br><span class="line">                <span class="string">"1: Are there any famous scenic spots in Beijing"</span>,</span><br><span class="line">                <span class="string">"2: What are the famous delicacies in Beijing"</span>,</span><br><span class="line">                <span class="string">"3: What's the fare on the Beijing subway"</span>,</span><br><span class="line">                <span class="string">"4: Where can I rent a car in Beijing "</span>,</span><br><span class="line">                <span class="string">"5: What are the opening hours of the Forbidden City"</span></span><br><span class="line">                ]</span><br><span class="line">answerlist = [<span class="string">"There are many famous scenic spots in Beijing, such as the Forbidden City, Tian 'anmen Square, the Great Wall at Badaling, the Summer Palace, the Bird's Nest, the Old Summer Palace and so on"</span>,</span><br><span class="line">              <span class="string">"Beijing's famous delicacies include Peking duck, old Beijing noodles with Fried sauce, Mutton cooked in a copper pan, Beijing Zhizi Barbecue, Fried liver, Fried tripe and so on"</span>,</span><br><span class="line">              <span class="string">"The subway fare in Beijing is usually between 3 and 10 yuan, and 25 to 50 yuan if you take the airport line"</span>,</span><br><span class="line">              <span class="string">"To tell the truth, it is very inconvenient for foreigners to rent a car in China, because they need to prepare and submit a lot of materials, such as the renter's passport, the city residence permit for more than 1 year, the Chinese driving license, and a guarantor of the city's household registration. The guarantor shall provide his/her household register, identity card, guarantee undertaking and so on. If you are only traveling for a short time, we suggest you take the subway, bus or taxi, which will be much more convenient"</span>,</span><br><span class="line">              <span class="string">"April 1st to October 31st (peak season) from Tuesday to Sunday 08:30 to 17:00, closed on Mondays; November 1 - March 31 of the following year (off-season) From Tuesday to Sunday 08:30-16:30, closed on Monday; Mondays are not closed during legal holidays."</span></span><br><span class="line">              ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建窗口</span></span><br><span class="line">root = Tk()</span><br><span class="line"><span class="comment"># 标题</span></span><br><span class="line">root.title(<span class="string">'Q&amp;A chatbot'</span>)</span><br><span class="line"><span class="comment"># 读取图标</span></span><br><span class="line">root.iconbitmap(<span class="string">'F:\s.ico'</span>)</span><br><span class="line"><span class="comment"># 窗口大小</span></span><br><span class="line">root.geometry(<span class="string">'800x650+300+100'</span>)</span><br><span class="line"><span class="comment"># 固定窗口</span></span><br><span class="line">root.resizable(width=<span class="literal">False</span>, height=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># 加入背景图</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 聊天窗口布局，布置3个</span></span><br><span class="line">frm1 = Frame(width=<span class="number">800</span>, height=<span class="number">400</span>)</span><br><span class="line">frm4 = Frame(width=<span class="number">800</span>, height=<span class="number">7</span>)</span><br><span class="line">frm2 = Frame(width=<span class="number">800</span>, height=<span class="number">200</span>)</span><br><span class="line"><span class="comment"># frm3 = Frame(width=800, height=30)</span></span><br><span class="line">frm1.config(bg=<span class="string">"#f6f5ec"</span>)</span><br><span class="line">frm2.config(bg=<span class="string">"#f6f5ec"</span>)</span><br><span class="line"><span class="comment"># frm3.config(bg="#f6f5ec")</span></span><br><span class="line">frm4.config(bg=<span class="string">"#f6f5ec"</span>)</span><br><span class="line">frm1.grid()</span><br><span class="line">frm4.grid()</span><br><span class="line">frm2.grid()</span><br><span class="line"><span class="comment"># frm3.grid()</span></span><br><span class="line"></span><br><span class="line">root.configure(background=<span class="string">'#f6f5ec'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendMsg</span><span class="params">()</span>:</span>  <span class="comment"># 发送消息</span></span><br><span class="line">    strMsg1 = <span class="string">"user: "</span> + time.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>, time.localtime()) + <span class="string">'\n'</span></span><br><span class="line">    txtMsgList.config(state=<span class="string">'normal'</span>)</span><br><span class="line">    txtMsgList.insert(END, strMsg1, <span class="string">'color'</span>)</span><br><span class="line">    txtMsgList.insert(END, txtMsg.get(<span class="string">'0.0'</span>, END))</span><br><span class="line">    <span class="comment"># 开始回复消息</span></span><br><span class="line">    answer = <span class="string">"chatbot: "</span> + time.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>, time.localtime()) + <span class="string">'\n'</span></span><br><span class="line">    best = run_chatbot(txtMsg.get(<span class="string">'0.0'</span>, END)[:<span class="number">-1</span>], data) + <span class="string">'\n'</span></span><br><span class="line">    txtMsgList.insert(END, answer, <span class="string">'color'</span>)</span><br><span class="line">    <span class="keyword">if</span> txtMsg.get(<span class="string">'0.0'</span>, END)[:<span class="number">-1</span>] == <span class="string">'1'</span>:</span><br><span class="line">        txtMsgList.insert(END, answerlist[<span class="number">0</span>])</span><br><span class="line">        txtMsgList.insert(INSERT, <span class="string">'\n'</span>)</span><br><span class="line">    <span class="keyword">elif</span> txtMsg.get(<span class="string">'0.0'</span>, END)[:<span class="number">-1</span>] == <span class="string">'2'</span>:</span><br><span class="line">        txtMsgList.insert(END, answerlist[<span class="number">1</span>])</span><br><span class="line">        txtMsgList.insert(INSERT, <span class="string">'\n'</span>)</span><br><span class="line">    <span class="keyword">elif</span> txtMsg.get(<span class="string">'0.0'</span>, END)[:<span class="number">-1</span>] == <span class="string">'3'</span>:</span><br><span class="line">        txtMsgList.insert(END, answerlist[<span class="number">2</span>])</span><br><span class="line">        txtMsgList.insert(INSERT, <span class="string">'\n'</span>)</span><br><span class="line">    <span class="keyword">elif</span> txtMsg.get(<span class="string">'0.0'</span>, END)[:<span class="number">-1</span>] == <span class="string">'4'</span>:</span><br><span class="line">        txtMsgList.insert(END, answerlist[<span class="number">3</span>])</span><br><span class="line">        txtMsgList.insert(INSERT, <span class="string">'\n'</span>)</span><br><span class="line">    <span class="keyword">elif</span> txtMsg.get(<span class="string">'0.0'</span>, END)[:<span class="number">-1</span>] == <span class="string">'5'</span>:</span><br><span class="line">        txtMsgList.insert(END, answerlist[<span class="number">4</span>])</span><br><span class="line">        txtMsgList.insert(INSERT, <span class="string">'\n'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        txtMsgList.insert(END, best)</span><br><span class="line"></span><br><span class="line">    txtMsgList.config(state=<span class="string">'disabled'</span>)</span><br><span class="line">    txtMsgList.yview(END)</span><br><span class="line">    txtMsg.delete(<span class="string">'0.0'</span>, END)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendMsgEvent</span><span class="params">(event)</span>:</span>  <span class="comment"># 发送消息事件</span></span><br><span class="line">    <span class="keyword">if</span> event.keysym == <span class="string">'Return'</span>:</span><br><span class="line">        sendMsg()</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'break'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 布局2</span></span><br><span class="line"><span class="comment"># 多重文本框输入，建立输入窗口</span></span><br><span class="line">txtMsg = Text(frm2, height=<span class="number">5</span>, width=<span class="number">60</span>, font=(<span class="string">'Times New Roman'</span>, <span class="number">15</span>))</span><br><span class="line">txtMsg.grid(row=<span class="number">0</span>, column=<span class="number">0</span>, stick=E)</span><br><span class="line"></span><br><span class="line">scrollbar1 = Scrollbar(frm2, command=txtMsg.yview, cursor=<span class="string">"heart"</span>)</span><br><span class="line">txtMsg[<span class="string">'yscrollcommand'</span>] = scrollbar1.set</span><br><span class="line">scrollbar1.grid(row=<span class="number">0</span>, column=<span class="number">1</span>, stick=E)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绑定一个控制键，进行发送信息</span></span><br><span class="line">txtMsg.bind(<span class="string">"&lt;KeyPress-Return&gt;"</span>, sendMsgEvent)</span><br><span class="line">button = Button(frm2, text=<span class="string">'Send (S)'</span>, font=(<span class="string">'Times New Roman'</span>, <span class="number">12</span>), command=sendMsg, bg=<span class="string">"#afb4db"</span>)</span><br><span class="line">button.grid(row=<span class="number">1</span>, column=<span class="number">0</span>, ipadx=<span class="number">8</span>, stick=E)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 布局1</span></span><br><span class="line">txtMsgList = Text(frm1, height=<span class="number">15</span>, width=<span class="number">60</span>, font=(<span class="string">'Times New Roman'</span>, <span class="number">15</span>))</span><br><span class="line">txtMsgList.tag_config(<span class="string">'color'</span>, foreground=<span class="string">'#6a6da9'</span>)</span><br><span class="line">strMsg = <span class="string">"BoBo: "</span> + time.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>, time.localtime()) + <span class="string">'\n'</span></span><br><span class="line">txtMsgList.insert(END, strMsg, <span class="string">'color'</span>)</span><br><span class="line"><span class="comment"># 输入问候语</span></span><br><span class="line">txtMsgList.insert(END, hello)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入待查询的5个问题</span></span><br><span class="line">txtMsgList.insert(END, strMsg, <span class="string">'color'</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(questionlist)):</span><br><span class="line">    txtMsgList.insert(END, questionlist[i])</span><br><span class="line">    txtMsgList.insert(INSERT, <span class="string">'\n'</span>)</span><br><span class="line">txtMsgList.config(state=<span class="string">'disabled'</span>)</span><br><span class="line">txtMsgList.grid(row=<span class="number">0</span>, column=<span class="number">0</span>, stick=E)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 滚动条</span></span><br><span class="line">scrollbar = Scrollbar(frm1, command=txtMsgList.yview, cursor=<span class="string">"heart"</span>)</span><br><span class="line">txtMsgList[<span class="string">'yscrollcommand'</span>] = scrollbar.set</span><br><span class="line">scrollbar.grid(row=<span class="number">0</span>, column=<span class="number">1</span>, ipady=<span class="number">100</span>, stick=E)</span><br><span class="line"><span class="comment"># 消息循环 显示窗口</span></span><br><span class="line">root.mainloop()</span><br></pre></td></tr></table></figure>

<p>通过布局的形式，展示GUI界面</p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>数据量太少，需要补充</p>
<p>GUI界面需要美化。</p>
<p><img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1596887290993&di=2276400d1f8c97a93b091f0dc0cee287&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201507%2F31%2F20150731184610_nz8Z3.jpeg" alt=""></p>

    </div>
</article>


                </div>
                <aside class="col-md-4 gal-left" id="sidebar">
    <!-- 此为sidebar的搜索框, 非搜索结果页面 -->
<aside id="sidebar-search">
    <div class="search hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <form class="form-inline clearfix" id="search-form" method="get"
              action="/search/index.html">
            <input type="text" name="s" class="form-control" id="searchInput" placeholder="搜索文章~" autocomplete="off">
            <button class="btn btn-danger btn-gal" type="submit">
                <i class="fa fa-search"></i>
            </button>
        </form>
    </div>
</aside>
    <aside id="sidebar-author">
    <div class="panel panel-gal" data-aos="flip-right" data-aos-duration="3000">
        <div class="panel-heading" style="text-align: center">
            <i class="fa fa-quote-left"></i>
            esy
            <i class="fa fa-quote-right"></i>
        </div>
        <div class="author-panel text-center">
            <img src="/imgs/avatar.jpg" width="140" height="140"
                 alt="个人头像" class="author-image">
            <p class="author-description"><p>miao</p>
</p>
        </div>
    </div>
</aside>
    
    <aside id="sidebar-recent_comments">
    <div class="panel panel-gal recent hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <div class="panel-heading">
            <i class="fa fa-comments"></i>
            最新评论
            <i class="fa fa-times-circle panel-remove"></i>
            <i class="fa fa-chevron-circle-up panel-toggle"></i>
        </div>
        <ul class="list-group list-group-flush"></ul>
    </div>
</aside>
    
    <!-- 要配置好leancloud才能开启此小工具 -->
    
    
    <aside id="sidebar-recent_posts">
    <div class="panel panel-gal recent hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <div class="panel-heading">
            <i class="fa fa-refresh"></i>
            近期文章
            <i class="fa fa-times-circle panel-remove"></i>
            <i class="fa fa-chevron-circle-up panel-toggle"></i>
        </div>
        <ul class="list-group list-group-flush">
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/08/08/UI%E7%95%8C%E9%9D%A2%E7%BE%8E%E5%8C%96/">UI界面美化</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/08/08/q-a%E6%95%B0%E6%8D%AE%E8%A1%A5%E5%85%85/">q&amp;a数据补充</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/08/08/chatbot-%E7%89%88%E6%9C%AC1%E6%80%BB%E7%BB%93/">chatbot_版本1总结</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/07/28/chatbot/GUI%E7%95%8C%E9%9D%A2%E7%9A%84%E5%AE%8C%E5%96%84/">GUI界面的完善</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/07/27/HMM/%E6%A0%B7%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%9A%84%E7%94%9F%E6%88%90/">样本数据的生成</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/07/23/chatbot/gui%E7%95%8C%E9%9D%A2%E6%9A%82%E5%AE%9A%E7%89%88%E5%92%8C%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/">gui界面暂定版和遇到的问题</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/07/23/chatbot/qachatbot%E6%9A%82%E5%AE%9A%E7%89%88/">qachatbot暂定版</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/07/22/chatbot/chatbot-sorry%E7%AF%87/">chatbot_sorry篇</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/07/21/chatbot/python%E4%B8%8A%E7%9A%84GUI/">python上的GUI</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/07/20/chatbot/chatbot%E5%9C%A8python%E4%B8%8A%E5%AE%9E%E7%8E%B0/">chatbot在python上实现</a>
                </span>
            </li>
            
        </ul>
    </div>
</aside>
    
    
    <aside id="sidebar-rand_posts">
    <div class="panel panel-gal recent hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <div class="panel-heading">
            <i class="fa fa-refresh"></i>
            随机文章
            <i class="fa fa-times-circle panel-remove"></i>
            <i class="fa fa-chevron-circle-up panel-toggle"></i>
        </div>
        <ul class="list-group list-group-flush">
            
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/07/27/HMM/%E6%A0%B7%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%9A%84%E7%94%9F%E6%88%90/">样本数据的生成</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/07/16/chatbot/q-a%E6%A3%80%E7%B4%A2%E5%BC%8F%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%9A%84%E6%B5%81%E7%A8%8B/">q@a检索式机器人的流程</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/02/28/hexo/2-28%E6%B1%87%E6%8A%A5/">2-28汇报</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/03/19/python/python-Matplotlib/">python_Matplotlib</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/04/12/python/python-Matplotlib%E8%A7%86%E9%A2%91%E8%AE%B2%E8%A7%A3%E7%89%88/">python-Matplotlib视频讲解版</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/05/26/python/python-%E5%85%A5%E9%97%A8%E5%A4%8D%E4%B9%A0%E4%B9%8B%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96/">python_入门复习之文件读取</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/03/25/python/python%E2%80%94%E2%80%94%E8%AF%BB%E5%8F%96excel%E6%96%87%E4%BB%B6%E4%B9%8B%E5%A5%87%E8%91%A9%E6%95%B0%E6%8D%AE/">python——读取excel文件之奇葩数据</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2019/12/26/python/%E5%8E%BB%E8%B6%8B%E5%8A%BF%E6%B3%A2%E5%8A%A8%E5%88%86%E6%9E%90DFA/">去趋势波动分析DFA</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/06/29/sleep%20apnea%20and%20sleep%20stage/%E4%B8%AD%E6%9C%9F%E7%AD%94%E8%BE%A9%E9%A2%98%E7%9B%AE/">中期答辩题目</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/06/24/sleep%20apnea%20and%20sleep%20stage/%E7%BB%98%E5%88%B6%E7%89%B9%E5%BE%81%E9%87%8D%E8%A6%81%E5%BA%A6%E7%AD%9B%E9%80%89%E7%BB%93%E6%9E%9C/">绘制特征重要度筛选结果</a>
                </span>
            </li>
            
        </ul>
    </div>
</aside>
    
    
    <aside id="gal-sets">
        <div class="panel panel-gal hidden-xs" data-aos="fade-up" data-aos-duration="2000">
            <ul class="nav nav-pills pills-gal">

                
                <li>
                    <a href="/2020/08/08/chatbot-%E7%89%88%E6%9C%AC1%E6%80%BB%E7%BB%93/index.html#sidebar-tags" data-toggle="tab" id="tags-tab">热门标签</a>
                </li>
                
                
                <li>
                    <a href="/2020/08/08/chatbot-%E7%89%88%E6%9C%AC1%E6%80%BB%E7%BB%93/index.html#sidebar-friend-links" data-toggle="tab" id="friend-links-tab">友情链接</a>
                </li>
                
                
                <li>
                    <a href="/2020/08/08/chatbot-%E7%89%88%E6%9C%AC1%E6%80%BB%E7%BB%93/index.html#sidebar-links" data-toggle="tab" id="links-tab">个人链接</a>
                </li>
                
            </ul>
            <div class="tab-content">
                
                <div class="cloud-tags tab-pane nav bs-sidenav fade" id="sidebar-tags">
    
    <a href="/tags/work/" style="font-size: 13.58219828288945px;" class="tag-cloud-link">work</a>
    
    <a href="/tags/hexo/" style="font-size: 10.094529901552583px;" class="tag-cloud-link">hexo</a>
    
    <a href="/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" style="font-size: 15.354641121088736px;" class="tag-cloud-link">-个人博客搭建</a>
    
    <a href="/tags/python/" style="font-size: 9.89102114806744px;" class="tag-cloud-link">-python</a>
    
    <a href="/tags/malab-%E6%AF%95%E4%B8%9A/" style="font-size: 12.04678114201563px;" class="tag-cloud-link">-malab -毕业</a>
    
    <a href="/tags/python-%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 15.212366027647919px;" class="tag-cloud-link">-python -人工智能</a>
    
    <a href="/tags/python/" style="font-size: 15.13186837549624px;" class="tag-cloud-link">python</a>
    
</div>
                
                
                <div class="friend-links tab-pane nav bs-sidenav fade" id="sidebar-friend-links">
    
    <li>
        <a href="http://kdays.net/days/" target="_blank">KDays Forum</a>
    </li>
    
    <li>
        <a href="http://www.gal123.com/" target="_blank">绅士导航♂</a>
    </li>
    
    <li>
        <a href="http://www.moe123.com/" target="_blank">萌导航</a>
    </li>
    
</div>
                
                
                <div class="links tab-pane nav bs-sidenav fade" id="sidebar-links">
    
    <li>
        <a href="https://github.com/ZEROKISEKI/" target="_blank">Github</a>
    </li>
    
    <li>
        <a href="https://coding.net/u/SORA1" target="_blank">Coding</a>
    </li>
    
    <li>
        <a href="https://www.zhihu.com/people/aonosora/activities" target="_blank">知乎</a>
    </li>
    
</div>
                
            </div>
        </div>
    </aside>
    
</aside>
            </div>
        </div>
    </div>
    <footer id="gal-footer">
    <div class="container">
        Copyright © 2018 esy Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>.&nbsp;Theme by <a href="https://github.com/ZEROKISEKI" target="_blank">AONOSORA</a>
    </div>
</footer>

<!-- 回到顶端 -->
<div id="gal-gotop">
    <i class="fa fa-angle-up"></i>
</div>
</body>
<script src="/js/activate-power-mode.js"></script>
<script>

    // 配置highslide
	hs.graphicsDir = '/js/highslide/graphics/'
    hs.outlineType = "rounded-white";
    hs.dimmingOpacity = 0.8;
    hs.outlineWhileAnimating = true;
    hs.showCredits = false;
    hs.captionEval = "this.thumb.alt";
    hs.numberPosition = "caption";
    hs.align = "center";
    hs.transitions = ["expand", "crossfade"];
    hs.lang.number = '共%2张图, 当前是第%1张';
    hs.addSlideshow({
      interval: 5000,
      repeat: true,
      useControls: true,
      fixedControls: "fit",
      overlayOptions: {
        opacity: 0.75,
        position: "bottom center",
        hideOnMouseOut: true
      }
    })

    // 初始化aos
    AOS.init({
      duration: 1000,
      delay: 0,
      easing: 'ease-out-back'
    });

</script>
<script>
	POWERMODE.colorful = 'true';    // make power mode colorful
	POWERMODE.shake = 'true';       // turn off shake
	// TODO 这里根据具体情况修改
	document.body.addEventListener('input', POWERMODE);
</script>
<script>
    window.slideConfig = {
      prefix: '/imgs/slide/background',
      ext: 'jpg',
      maxCount: '6'
    }
</script>
<script src="/js/hs.js"></script>
<script src="/js/blog.js"></script>

<script src="/js/oni.js"></script>



</html>