<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>ESY</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="esy">
<meta property="og:type" content="website">
<meta property="og:title" content="ESY">
<meta property="og:url" content="https://esyyes.github.io/page/7/index.html">
<meta property="og:site_name" content="ESY">
<meta property="og:description" content="esy">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="esy">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="ESY" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ESY</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://esyyes.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-标签和特征长度处理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/08/%E6%A0%87%E7%AD%BE%E5%92%8C%E7%89%B9%E5%BE%81%E9%95%BF%E5%BA%A6%E5%A4%84%E7%90%86/" class="article-date">
  <time datetime="2020-06-08T11:16:50.000Z" itemprop="datePublished">2020-06-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/work/">work</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/08/%E6%A0%87%E7%AD%BE%E5%92%8C%E7%89%B9%E5%BE%81%E9%95%BF%E5%BA%A6%E5%A4%84%E7%90%86/">标签和特征长度处理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="标签和特征长度处理"><a href="#标签和特征长度处理" class="headerlink" title="标签和特征长度处理"></a>标签和特征长度处理</h1><p>在进行机器学习之前需要查看标签和特征的长度，判断是否相等，数据比标签少30s</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/6/8</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">判断：</span></span><br><span class="line"><span class="string">读取注释和特征查看长度是否相等</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略警告</span></span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">19</span>):</span><br><span class="line">    feature = pd.read_excel(<span class="string">&#x27;F:/py/python-ECG信号处理/features_data&#x27;</span> + <span class="string">&#x27;/slp&#x27;</span> + <span class="string">&#x27;%s&#x27;</span> % i + <span class="string">&#x27;.xlsx&#x27;</span>)</span><br><span class="line">    data = pd.get_dummies(feature.iloc[<span class="number">0</span>:<span class="built_in">len</span>(feature), <span class="number">1</span>:])</span><br><span class="line">    note = pd.read_excel(<span class="string">&#x27;F:/py/python-ECG信号处理/note_data&#x27;</span> + <span class="string">&#x27;/%s&#x27;</span> % i + <span class="string">&#x27;.xlsx&#x27;</span>)</span><br><span class="line">    tag = pd.get_dummies(note.iloc[<span class="number">0</span>:<span class="built_in">len</span>(note)<span class="number">-1</span>, <span class="number">-1</span>:])</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(data) == <span class="built_in">len</span>(tag):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">f&#x27;数据slp<span class="subst">&#123;i&#125;</span>不相等&#x27;</span>)</span><br><span class="line">        print(<span class="string">f&#x27;特征长度<span class="subst">&#123;<span class="built_in">len</span>(data)&#125;</span>, 标签长度‘<span class="subst">&#123;<span class="built_in">len</span>(tag)&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">f&#x27;检测完毕&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="检测结果"><a href="#检测结果" class="headerlink" title="检测结果"></a>检测结果</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">数据slp5不相等	特征长度<span class="number">700</span>	标签长度<span class="number">719</span></span><br><span class="line">数据slp7不相等	特征长度<span class="number">719</span>	标签长度<span class="number">713</span></span><br><span class="line">数据slp8不相等	特征长度<span class="number">719</span>	标签长度<span class="number">693</span></span><br><span class="line">数据slp10不相等	特征长度<span class="number">699</span>	标签长度<span class="number">697</span></span><br><span class="line">数据slp14不相等	特征长度<span class="number">479</span>	标签长度<span class="number">457</span></span><br><span class="line">数据slp15不相等	特征长度<span class="number">699</span>	标签长度<span class="number">719</span></span><br><span class="line">数据slp16不相等	特征长度<span class="number">739</span>	标签长度<span class="number">719</span></span><br><span class="line">数据slp17不相等	特征长度<span class="number">439</span>	标签长度<span class="number">438</span></span><br><span class="line">检测完毕</span><br></pre></td></tr></table></figure>

<h2 id="数据处理"><a href="#数据处理" class="headerlink" title="数据处理"></a>数据处理</h2><p>slp5和slp15为slp03和slp60，只清除了AHI标签，没有清理睡眠标签</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/6/8</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> wfdb</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略警告</span></span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取st文件</span></span><br><span class="line"><span class="comment"># test = input(&quot;请输入想读取的文件名： &quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># test = &#x27;slp03&#x27;</span></span><br><span class="line">test = <span class="string">&#x27;slp60&#x27;</span></span><br><span class="line">annotation = wfdb.rdann(<span class="string">&#x27;F:/slpdb_data/mitdata&#x27;</span> + <span class="string">&#x27;/%s&#x27;</span> % test, <span class="string">&#x27;st&#x27;</span>)</span><br><span class="line">aux = annotation.aux_note</span><br><span class="line"><span class="comment"># record = wfdb.rdrecord(&#x27;F:/slpdb_data/mitdata&#x27; + &#x27;/%s&#x27; % test, sampfrom=1222500, sampto=1237500, channels=[3])</span></span><br><span class="line"><span class="comment"># ecg_signal = record.p_signal</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看低通气和osa阻塞性呼吸暂停的ecg信号取别</span></span><br><span class="line"><span class="comment"># 对标签进行处理。分为2个类别,就是正常和低通气。把osa判定为低通气</span></span><br><span class="line"></span><br><span class="line">tag1 = []</span><br><span class="line">tag2 = []</span><br><span class="line">tag3 = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(aux)):</span><br><span class="line">    <span class="keyword">if</span> <span class="number">538</span> &lt; i &lt; <span class="number">549</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> (aux[i][<span class="number">0</span>] == <span class="string">&#x27;4&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">0</span>] == <span class="string">&#x27;3&#x27;</span>):</span><br><span class="line">            tag1.append(<span class="number">1</span>)</span><br><span class="line">            tag2.append(<span class="number">1</span>)</span><br><span class="line">            tag3.append(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">elif</span> aux[i][<span class="number">0</span>] == <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">            tag1.append(<span class="number">2</span>)</span><br><span class="line">            tag2.append(<span class="number">2</span>)</span><br><span class="line">            tag3.append(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">elif</span> aux[i][<span class="number">0</span>] == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">            tag1.append(<span class="number">3</span>)</span><br><span class="line">            tag2.append(<span class="number">2</span>)</span><br><span class="line">            tag3.append(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">elif</span> aux[i][<span class="number">0</span>] == <span class="string">&#x27;R&#x27;</span>:</span><br><span class="line">            tag1.append(<span class="number">4</span>)</span><br><span class="line">            tag2.append(<span class="number">3</span>)</span><br><span class="line">            tag3.append(<span class="number">2</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            tag1.append(<span class="number">5</span>)</span><br><span class="line">            tag2.append(<span class="number">4</span>)</span><br><span class="line">            tag3.append(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 即aux[i][2]:为低通气这些的判定，如果没有则认定为正常，有就进行判定</span></span><br><span class="line">tag4 = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(aux)):</span><br><span class="line">    <span class="comment"># slp03</span></span><br><span class="line">    <span class="comment"># if 174 &lt; i &lt; 194:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="number">538</span> &lt; i &lt; <span class="number">549</span>:</span><br><span class="line">        <span class="comment"># slp60</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(aux[i]) == <span class="number">1</span> <span class="keyword">or</span> <span class="built_in">len</span>(aux[i]) == <span class="number">2</span>:</span><br><span class="line">            tag4.append(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">len</span>(aux[i]) &gt;= <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">if</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;H&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;X&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;O&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;C&#x27;</span>):</span><br><span class="line">                tag4.append(<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                tag4.append(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">label1 = pd.DataFrame(tag1, columns=[<span class="string">&#x27;N321RW&#x27;</span>])</span><br><span class="line">label2 = pd.DataFrame(tag2, columns=[<span class="string">&#x27;DLRW&#x27;</span>])</span><br><span class="line">label3 = pd.DataFrame(tag3, columns=[<span class="string">&#x27;NRW&#x27;</span>])</span><br><span class="line">label4 = pd.DataFrame(tag4, columns=[<span class="string">&#x27;AHI&#x27;</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">label = pd.concat([label1, label2, label3, label4], axis=<span class="number">1</span>)</span><br><span class="line">num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;输入保存的文件名： &quot;</span>))</span><br><span class="line">label.to_excel(<span class="string">&#x27;%d&#x27;</span> % num + <span class="string">&quot;.xlsx&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="再次检测"><a href="#再次检测" class="headerlink" title="再次检测"></a>再次检测</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">数据slp7不相等	特征长度<span class="number">719</span>	标签长度<span class="number">713</span></span><br><span class="line">数据slp8不相等	特征长度<span class="number">719</span>	标签长度<span class="number">693</span></span><br><span class="line">数据slp10不相等	特征长度<span class="number">699</span>	标签长度<span class="number">697</span></span><br><span class="line">数据slp14不相等	特征长度<span class="number">479</span>	标签长度<span class="number">457</span></span><br><span class="line">数据slp16不相等	特征长度<span class="number">739</span>	标签长度<span class="number">719</span></span><br><span class="line">数据slp17不相等	特征长度<span class="number">439</span>	标签长度<span class="number">438</span></span><br><span class="line">检测完毕</span><br></pre></td></tr></table></figure>

<h2 id="数据查看"><a href="#数据查看" class="headerlink" title="数据查看"></a>数据查看</h2><p>slp7即为slp14</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> wfdb</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略警告</span></span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取st文件</span></span><br><span class="line"><span class="comment"># test = input(&quot;请输入想读取的文件名： &quot;)</span></span><br><span class="line"></span><br><span class="line">test = <span class="string">&#x27;slp14&#x27;</span></span><br><span class="line">annotation = wfdb.rdann(<span class="string">&#x27;F:/slpdb_data/mitdata&#x27;</span> + <span class="string">&#x27;/%s&#x27;</span> % test, <span class="string">&#x27;st&#x27;</span>)</span><br><span class="line">aux = annotation.aux_note</span><br><span class="line">sample_min = annotation.sample.<span class="built_in">min</span>()</span><br><span class="line">sample_max = annotation.sample.<span class="built_in">max</span>()</span><br><span class="line">print(<span class="string">f&#x27;起始位置为<span class="subst">&#123;sample_min&#125;</span>, 终止位置为<span class="subst">&#123;sample_max&#125;</span>&#x27;</span>)</span><br><span class="line">起始位置为<span class="number">45000</span>, 终止位置为<span class="number">5392500</span></span><br></pre></td></tr></table></figure>

<p>slp8:slp16</p>
<p>起始位置为195000, 终止位置为5392500</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">int</span>(<span class="number">195000</span>/record.fs/<span class="number">30</span>), <span class="built_in">int</span>(record.sig_len/record.fs/<span class="number">30</span> - <span class="number">1</span>)):</span><br></pre></td></tr></table></figure>

<p>slp10:slp37</p>
<p>数据slp10不相等    特征长度699    标签长度697</p>
<p>起始位置为15000, 终止位置为5242500</p>
<p>slp14:slp59</p>
<p>起始位置为165000, 终止位置为3592500</p>
<p>slp16:slp61</p>
<p>数据slp16不相等    特征长度739    标签长度719</p>
<p>起始位置为150000, 终止位置为5542500</p>
<p>slp17:slp66</p>
<p>数据slp17不相等    特征长度439    标签长度438</p>
<p>起始位置为1, 终止位置为3285000</p>
<h2 id="数据检测完毕"><a href="#数据检测完毕" class="headerlink" title="数据检测完毕"></a>数据检测完毕</h2><p>以后5分钟的数据片段还是要经过这个处理，标签缺失</p>
<p><img src="http://img3.a0bi.com/upload/ttq/20150716/1437008701869.jpg"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://esyyes.github.io/2020/06/08/%E6%A0%87%E7%AD%BE%E5%92%8C%E7%89%B9%E5%BE%81%E9%95%BF%E5%BA%A6%E5%A4%84%E7%90%86/" data-id="ckh378ye60071l4uec32y9fp2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/work/" rel="tag">work</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-HRV的30s特征提取" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/08/HRV%E7%9A%8430s%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96/" class="article-date">
  <time datetime="2020-06-08T09:50:09.000Z" itemprop="datePublished">2020-06-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/work/">work</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/08/HRV%E7%9A%8430s%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96/">HRV的30s特征提取</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="HRV的30s特征提取"><a href="#HRV的30s特征提取" class="headerlink" title="HRV的30s特征提取"></a>HRV的30s特征提取</h1><p> slp03和slp60数据中有一段数据遗失了ecg——r,</p>
<p>slp03消除174-194之间的数据</p>
<p>slp60消除538 &lt; i &lt; 549之间的数据</p>
<p> 标签这一部分全是w，可以删除</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/6/2</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># slp60数据到时需要加0.7或者其他左右，没有经过预处理后，就不会出现复数，所以peaks中就不需要abs，加起也好</span></span><br><span class="line"><span class="keyword">import</span> wfdb</span><br><span class="line"><span class="keyword">from</span> wfdb <span class="keyword">import</span> processing</span><br><span class="line"><span class="comment"># import numpy as np</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"><span class="keyword">from</span> peaks_time_features <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> time_domain <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> frequency_domain <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> HRV_interp1 <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> nonliner_domain <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> eliminate_outliers <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略警告</span></span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line">test = <span class="built_in">input</span>(<span class="string">&#x27;请输入文件名：&#x27;</span>)</span><br><span class="line"><span class="comment"># test = &#x27;slp03&#x27;</span></span><br><span class="line">record = wfdb.rdrecord(<span class="string">&#x27;F:/slpdb_data/mitdata&#x27;</span> + <span class="string">&#x27;/%s&#x27;</span> % test, channels=[<span class="number">0</span>])</span><br><span class="line">annotation = wfdb.rdann(<span class="string">&#x27;F:/slpdb_data/mitdata&#x27;</span> + <span class="string">&#x27;/%s&#x27;</span> % test, <span class="string">&#x27;ecg&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ecg_signal = record.p_signal</span><br><span class="line">ecg_locs = annotation.sample.tolist()</span><br><span class="line">ecg_locs.pop(<span class="number">0</span>)</span><br><span class="line">min_bpm = <span class="number">40</span></span><br><span class="line">max_bpm = <span class="number">200</span></span><br><span class="line"></span><br><span class="line">search_radius = <span class="built_in">int</span>(record.fs * <span class="number">60</span> / max_bpm)</span><br><span class="line">ecg_r_locs1 = processing.correct_peaks(ecg_signal[:, <span class="number">0</span>], peak_inds=ecg_locs, search_radius=search_radius,</span><br><span class="line">                                       smooth_window_size=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ecg_r_locs异常点处理</span></span><br><span class="line">ecg_r_locs = eliminate(ecg_r_locs1)</span><br><span class="line"><span class="comment"># ecg_r_peaks峰值点获取</span></span><br><span class="line">ecg_r_peaks = [ecg_signal[<span class="built_in">int</span>(ecg_r_locs[i])][<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(ecg_r_locs))]</span><br><span class="line"></span><br><span class="line">all_RR_30s = []</span><br><span class="line">all_locs_30s = []</span><br><span class="line">all_peaks_30s = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">int</span>(record.sig_len/record.fs/<span class="number">30</span> - <span class="number">1</span>)):</span><br><span class="line">    RR_30s = []</span><br><span class="line">    locs_30s = []</span><br><span class="line">    peaks_30s = []</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(ecg_r_locs)):</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">30</span>*record.fs*i) &lt;= ecg_r_locs[j] &lt;= (<span class="number">30</span>*record.fs*(i+<span class="number">1</span>)):</span><br><span class="line">            locs_30s.append(ecg_r_locs[j])</span><br><span class="line">            RR_30s.append((ecg_r_locs[j+<span class="number">1</span>] - ecg_r_locs[j]) * <span class="number">4</span>)</span><br><span class="line">            peaks_30s.append(ecg_r_peaks[j])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">    RR_30s.pop()</span><br><span class="line">    all_RR_30s.append(RR_30s)</span><br><span class="line">    <span class="keyword">del</span> locs_30s[<span class="number">0</span>]</span><br><span class="line">    all_locs_30s.append(locs_30s)</span><br><span class="line">    all_peaks_30s.append(peaks_30s)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ECG_R</span></span><br><span class="line">peaks_features = [peaks_time_feature(all_peaks_30s[i]) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(all_peaks_30s))]</span><br><span class="line"><span class="comment"># HRV</span></span><br><span class="line">hrv_time = [time_features(all_RR_30s[i]) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(all_RR_30s))]</span><br><span class="line">hrv_freq = [getfreq(resample(hrv_interp1(all_locs_30s[i], all_RR_30s[i], <span class="number">1</span>), <span class="number">250</span>, <span class="number">4</span>)) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(all_RR_30s))]</span><br><span class="line">hrv_nonl = [non_linear(np.array(all_RR_30s[i])) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(all_RR_30s))]</span><br><span class="line">features = [peaks_features[i] + hrv_time[i] + hrv_freq[i] + hrv_nonl[i] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(all_RR_30s))]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存为excel</span></span><br><span class="line">feature = pd.DataFrame(features, columns=[<span class="string">&#x27;p_max&#x27;</span>, <span class="string">&#x27;p_min&#x27;</span>, <span class="string">&#x27;p_mean&#x27;</span>, <span class="string">&#x27;p_median&#x27;</span>, <span class="string">&#x27;p_SDNN&#x27;</span>, <span class="string">&#x27;p_var&#x27;</span>,</span><br><span class="line">                                          <span class="string">&#x27;p_Peaks&#x27;</span>, <span class="string">&#x27;p_RMSSD&#x27;</span>, <span class="string">&#x27;p_kurt&#x27;</span>, <span class="string">&#x27;p_skew&#x27;</span>, <span class="string">&#x27;p_wave_factor&#x27;</span>,</span><br><span class="line">                                          <span class="string">&#x27;p_peak_factor&#x27;</span>, <span class="string">&#x27;p_Impulse_factor&#x27;</span>, <span class="string">&#x27;p_Margin_factor&#x27;</span>, <span class="string">&#x27;p_RMS&#x27;</span>,</span><br><span class="line">                                          <span class="string">&#x27;R_mean&#x27;</span>, <span class="string">&#x27;R_SDNN&#x27;</span>, <span class="string">&#x27;R_SDSD&#x27;</span>, <span class="string">&#x27;NN50&#x27;</span>, <span class="string">&#x27;pNN50&#x27;</span>, <span class="string">&#x27;NN20&#x27;</span>, <span class="string">&#x27;pNN20&#x27;</span>, <span class="string">&#x27;R_RMSSD&#x27;</span>,</span><br><span class="line">                                          <span class="string">&#x27;R_median&#x27;</span>, <span class="string">&#x27;R_NUM&#x27;</span>, <span class="string">&#x27;R_CVSD&#x27;</span>, <span class="string">&#x27;R_CV&#x27;</span>, <span class="string">&#x27;HR_mean&#x27;</span>, <span class="string">&#x27;HR_max&#x27;</span>, <span class="string">&#x27;HR_min&#x27;</span>, <span class="string">&#x27;HR_std&#x27;</span>,</span><br><span class="line">                                          <span class="string">&#x27;LF&#x27;</span>, <span class="string">&#x27;HF&#x27;</span>, <span class="string">&#x27;LF_HF&#x27;</span>, <span class="string">&#x27;LFnu&#x27;</span>, <span class="string">&#x27;HFnu&#x27;</span>, <span class="string">&#x27;total&#x27;</span>, <span class="string">&#x27; VLF&#x27;</span>, <span class="string">&#x27;sd1&#x27;</span>, <span class="string">&#x27;sd2&#x27;</span>, <span class="string">&#x27;sd2/sd1&#x27;</span>,</span><br><span class="line">                                          <span class="string">&#x27;csi10&#x27;</span>, <span class="string">&#x27;cvi&#x27;</span>, <span class="string">&#x27;Modified_CSI10&#x27;</span>, <span class="string">&#x27;apen&#x27;</span>, <span class="string">&#x27;spen&#x27;</span>, <span class="string">&#x27;lle&#x27;</span>, <span class="string">&#x27;sampen&#x27;</span>])</span><br><span class="line">num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入特征的名字:&#x27;</span>))</span><br><span class="line">feature.to_excel(<span class="string">&#x27;slp&#x27;</span> + <span class="string">&#x27;%d&#x27;</span> % num + <span class="string">&quot;.xlsx&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">all_peaks_30s = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">int</span>(record.sig_len/record.fs/<span class="number">30</span> - <span class="number">1</span>)):</span><br><span class="line">    <span class="keyword">if</span> <span class="number">538</span> &lt; i &lt; <span class="number">549</span>:slp60</span><br><span class="line">        <span class="number">174</span><span class="number">-194</span> slp03</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        RR_30s = []</span><br><span class="line">        locs_30s = []</span><br><span class="line">        peaks_30s = []</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(ecg_r_locs)):</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">30</span>*record.fs*i) &lt;= ecg_r_locs[j] &lt;= (<span class="number">30</span>*record.fs*(i+<span class="number">1</span>)):</span><br><span class="line">                locs_30s.append(ecg_r_locs[j])</span><br><span class="line">                RR_30s.append((ecg_r_locs[j+<span class="number">1</span>] - ecg_r_locs[j]) * <span class="number">4</span>)</span><br><span class="line">                peaks_30s.append(ecg_r_peaks[j])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">        RR_30s.pop()</span><br><span class="line">        all_RR_30s.append(RR_30s)</span><br><span class="line">        <span class="keyword">del</span> locs_30s[<span class="number">0</span>]</span><br><span class="line">        all_locs_30s.append(locs_30s)</span><br><span class="line">        all_peaks_30s.append(peaks_30s)</span><br></pre></td></tr></table></figure>

<h2 id="消除异常点"><a href="#消除异常点" class="headerlink" title="消除异常点"></a>消除异常点</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/6/8</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># RR间期获取</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">RR_rr</span>(<span class="params">locs1</span>):</span></span><br><span class="line">    <span class="keyword">return</span> [locs1[i+<span class="number">1</span>]-locs1[i] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(locs1) - <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 得到19个RR间期的均值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">MRR</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> [np.mean(x[i:i+<span class="number">19</span>]) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(x) - <span class="number">19</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 消除过检</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Eliminate_check</span>(<span class="params">locs1</span>):</span></span><br><span class="line">    RR_lou = []</span><br><span class="line">    num = <span class="number">0</span></span><br><span class="line">    RR_locs_lou = []</span><br><span class="line">    RR = RR_rr(locs1)</span><br><span class="line">    mRR = MRR(RR)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(RR)):</span><br><span class="line">        <span class="keyword">if</span> i &lt; <span class="number">10</span>:</span><br><span class="line">            <span class="keyword">if</span> RR[i] &lt; (<span class="number">0.55</span> * mRR[<span class="number">0</span>]):</span><br><span class="line">                RR2 = RR[i] + RR[i<span class="number">-1</span>]</span><br><span class="line">                num += <span class="number">1</span></span><br><span class="line">                RR_lou.pop(i - num)</span><br><span class="line">                locs2 = locs1[i + <span class="number">1</span>]</span><br><span class="line">                RR_locs_lou.pop(i - num)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                RR2 = RR[i]</span><br><span class="line">                locs2 = locs1[i + <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">elif</span> i &gt; (<span class="built_in">len</span>(RR) - <span class="number">10</span>):</span><br><span class="line">            <span class="keyword">if</span> RR[i] &lt; (<span class="number">0.55</span> * mRR[<span class="built_in">len</span>(mRR) - <span class="number">1</span>]):</span><br><span class="line">                RR2 = RR[i] + RR[i - <span class="number">1</span>]</span><br><span class="line">                num = num + <span class="number">1</span></span><br><span class="line">                locs2 = locs1[i + <span class="number">1</span>]</span><br><span class="line">                RR_lou.pop(i - num)</span><br><span class="line">                RR_locs_lou.pop(i - num)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                RR2 = RR[i]</span><br><span class="line">                locs2 = locs1[i + <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> RR[i] &lt; (<span class="number">0.55</span> * mRR[i - <span class="number">10</span>]):</span><br><span class="line">                RR2 = RR[i] + RR[i - <span class="number">1</span>]</span><br><span class="line">                num = num + <span class="number">1</span></span><br><span class="line">                RR_lou.pop(i - num)</span><br><span class="line">                locs2 = locs1[i + <span class="number">1</span>]</span><br><span class="line">                RR_locs_lou.pop(i - num)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                RR2 = RR[i]</span><br><span class="line">                locs2 = locs1[i + <span class="number">1</span>]</span><br><span class="line">        RR_lou.append(RR2)</span><br><span class="line">        RR_locs_lou.append(locs2)</span><br><span class="line">    RR_locs_lou.insert(<span class="number">0</span>, locs1[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">return</span> RR_locs_lou</span><br><span class="line"></span><br><span class="line"><span class="comment"># 消除漏检</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Eliminate_LOW</span>(<span class="params">locs</span>):</span></span><br><span class="line">    locs1 = Eliminate_check(locs)</span><br><span class="line">    RR = RR_rr(locs1)</span><br><span class="line">    mRR = MRR(RR)</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    k = <span class="number">0</span></span><br><span class="line">    RR_guo = []</span><br><span class="line">    RR_locs_guo = []</span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(RR):</span><br><span class="line">        <span class="keyword">if</span> i &lt; <span class="number">10</span>:</span><br><span class="line">            <span class="keyword">if</span> RR[i] &gt; (<span class="number">1.55</span> * mRR[<span class="number">0</span>]):</span><br><span class="line">                m = <span class="built_in">int</span>(<span class="built_in">round</span>(RR[i] / mRR[<span class="number">0</span>]))</span><br><span class="line">                RR3 = RR[i] / m</span><br><span class="line">                RR_guo[(i + k):(i + k)] = (m - <span class="number">1</span>) * [RR3]</span><br><span class="line">                cs = []</span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(m - <span class="number">1</span>):</span><br><span class="line">                    cs1 = locs1[i] + (j + <span class="number">1</span>) * RR3</span><br><span class="line">                    cs.append(cs1)</span><br><span class="line">                RR_locs_guo.extend(cs)</span><br><span class="line">                locs2 = locs1[i + <span class="number">1</span>]</span><br><span class="line">                k = k + m</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                RR3 = RR[i]</span><br><span class="line">                locs2 = locs1[i + <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> i &gt; (<span class="built_in">len</span>(RR) - <span class="number">10</span>):</span><br><span class="line">            <span class="keyword">if</span> RR[i] &gt; (<span class="number">1.55</span> * mRR[<span class="built_in">len</span>(mRR) - <span class="number">1</span>]):</span><br><span class="line">                m = <span class="built_in">int</span>(<span class="built_in">round</span>(RR[i] / mRR[<span class="built_in">len</span>(mRR) - <span class="number">1</span>]))</span><br><span class="line">                RR3 = RR[i] / m</span><br><span class="line">                RR_guo[(i + k):(i + k)] = (m - <span class="number">1</span>) * [RR3]</span><br><span class="line">                cs = []</span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(m - <span class="number">1</span>):</span><br><span class="line">                    cs1 = locs1[i] + (j + <span class="number">1</span>) * RR3</span><br><span class="line">                    cs.append(cs1)</span><br><span class="line">                RR_locs_guo.extend(cs)</span><br><span class="line">                locs2 = locs1[i + <span class="number">1</span>]</span><br><span class="line">                k = k + m</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                RR3 = RR[i]</span><br><span class="line">                locs2 = locs1[i + <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> RR[i] &gt; (<span class="number">1.55</span> * mRR[i - <span class="number">10</span>]):</span><br><span class="line">                m = <span class="built_in">int</span>(<span class="built_in">round</span>(RR[i] / mRR[i]))</span><br><span class="line">                RR3 = RR[i] / m</span><br><span class="line">                RR_guo[(i + k):(i + k)] = (m - <span class="number">1</span>) * [RR3]</span><br><span class="line">                cs = []</span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(m - <span class="number">1</span>):</span><br><span class="line">                    cs1 = locs1[i] + (j + <span class="number">1</span>) * RR3</span><br><span class="line">                    cs.append(cs1)</span><br><span class="line">                RR_locs_guo.extend(cs)</span><br><span class="line">                locs2 = locs1[i + <span class="number">1</span>]</span><br><span class="line">                k = k + m</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                RR3 = RR[i]</span><br><span class="line">                locs2 = locs1[i + <span class="number">1</span>]</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        RR_locs_guo.append(locs2)</span><br><span class="line">        RR_guo.append(RR3)</span><br><span class="line">    RR_locs_guo.insert(<span class="number">0</span>, locs1[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">return</span> RR_locs_guo</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">eliminate</span>(<span class="params">locs1</span>):</span></span><br><span class="line">    c = Eliminate_LOW(Eliminate_check(locs1))</span><br><span class="line">    <span class="keyword">return</span> c</span><br></pre></td></tr></table></figure>

<h2 id="peaks的时域特征"><a href="#peaks的时域特征" class="headerlink" title="peaks的时域特征"></a>peaks的时域特征</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/6/3</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># R峰值的时域特征分析</span></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"></span><br><span class="line"><span class="comment"># 裕度因子</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">margin_factor</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(x) - <span class="number">1</span>):</span><br><span class="line">        <span class="built_in">sum</span> += math.sqrt(x[i])</span><br><span class="line">    mean = np.mean(<span class="built_in">sum</span>)</span><br><span class="line">    <span class="keyword">return</span> mean**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 差值均方根</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_RMSSD</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(x) - <span class="number">1</span>):</span><br><span class="line">        <span class="built_in">sum</span> += (x[i+<span class="number">1</span>] - x[i])**<span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> math.sqrt(<span class="built_in">sum</span>/(<span class="built_in">len</span>(x) - <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 均方根</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_rms</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(x) - <span class="number">1</span>):</span><br><span class="line">        <span class="built_in">sum</span> += (x[i])**<span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> math.sqrt(<span class="built_in">sum</span> / (<span class="built_in">len</span>(x)<span class="number">-1</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">peaks_time_feature</span>(<span class="params">f</span>):</span></span><br><span class="line">    x = <span class="built_in">abs</span>(np.array(f))</span><br><span class="line">    <span class="comment"># 最大值</span></span><br><span class="line">    p_max = x.<span class="built_in">max</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 最小值</span></span><br><span class="line">    p_min = x.<span class="built_in">min</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 均值：</span></span><br><span class="line">    p_mean = x.mean()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 中位数</span></span><br><span class="line">    p_median = np.median(x)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 标准差</span></span><br><span class="line">    SDNN = x.std()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 方差</span></span><br><span class="line">    p_var = x.var()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 峰峰值</span></span><br><span class="line">    p_peaks = p_max - p_min</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 差值均方根</span></span><br><span class="line">    RMSSD = get_RMSSD(x)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 峭度/峰度</span></span><br><span class="line">    p_kurt = stats.kurtosis(x)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 偏度</span></span><br><span class="line">    p_skew = stats.skew(x)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 波形因子</span></span><br><span class="line">    p_wave_factor = RMSSD / p_mean</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 峰值因子</span></span><br><span class="line">    p_peak_factor = p_peaks / RMSSD</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 脉冲因子</span></span><br><span class="line">    p_impulse_factor = p_peaks / p_mean</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 裕度因子</span></span><br><span class="line">    p_margin_factor = p_peaks / margin_factor(x)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 均方根</span></span><br><span class="line">    p_RMS = get_rms(x)</span><br><span class="line"></span><br><span class="line">    list_time_features = [p_max, p_min, p_mean, p_median, SDNN, p_var, p_peaks, RMSSD, p_kurt, p_skew,</span><br><span class="line">                          p_wave_factor, p_peak_factor, p_impulse_factor, p_margin_factor, p_RMS]</span><br><span class="line">    <span class="keyword">return</span> list_time_features</span><br></pre></td></tr></table></figure>

<h2 id="HRV的时域特征"><a href="#HRV的时域特征" class="headerlink" title="HRV的时域特征"></a>HRV的时域特征</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/6/8</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> hrvanalysis <span class="keyword">import</span> get_time_domain_features</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">time_features</span>(<span class="params">x</span>):</span></span><br><span class="line">    A = get_time_domain_features(x)</span><br><span class="line">    RR_mean = A[<span class="string">&#x27;mean_nni&#x27;</span>]</span><br><span class="line">    SDNN = A[<span class="string">&#x27;sdnn&#x27;</span>]</span><br><span class="line">    SDSD = A[<span class="string">&#x27;sdsd&#x27;</span>]</span><br><span class="line">    NN50 = A[<span class="string">&#x27;nni_50&#x27;</span>]</span><br><span class="line">    PNN50 = A[<span class="string">&#x27;pnni_50&#x27;</span>]</span><br><span class="line">    NN20 = A[<span class="string">&#x27;nni_20&#x27;</span>]</span><br><span class="line">    PNN20 = A[<span class="string">&#x27;pnni_20&#x27;</span>]</span><br><span class="line">    RMSSD = A[<span class="string">&#x27;rmssd&#x27;</span>]</span><br><span class="line">    RR_median = A[<span class="string">&#x27;median_nni&#x27;</span>]</span><br><span class="line">    NUM = A[<span class="string">&#x27;range_nni&#x27;</span>]</span><br><span class="line">    CVSD = A[<span class="string">&#x27;cvsd&#x27;</span>]</span><br><span class="line">    RR_CV = A[<span class="string">&#x27;cvnni&#x27;</span>]</span><br><span class="line">    HR_mean = A[<span class="string">&#x27;mean_hr&#x27;</span>]</span><br><span class="line">    HR_max = A[<span class="string">&#x27;max_hr&#x27;</span>]</span><br><span class="line">    HR_min = A[<span class="string">&#x27;min_hr&#x27;</span>]</span><br><span class="line">    HR_std = A[<span class="string">&#x27;std_hr&#x27;</span>]</span><br><span class="line">    ALL = [RR_mean, SDNN, SDSD, NN50, PNN50, NN20, PNN20, RMSSD, RR_median, NUM, CVSD, RR_CV, HR_mean, HR_max,</span><br><span class="line">           HR_min, HR_std]</span><br><span class="line">    <span class="keyword">return</span> ALL</span><br></pre></td></tr></table></figure>

<h2 id="插值并重采样"><a href="#插值并重采样" class="headerlink" title="插值并重采样"></a>插值并重采样</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/6/8</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> scipy.interpolate <span class="keyword">as</span> spi</span><br><span class="line"></span><br><span class="line"><span class="comment"># 插值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hrv_interp1</span>(<span class="params">x, y, s</span>):</span></span><br><span class="line">    x_new = np.linspace(x[<span class="number">0</span>], x[<span class="built_in">len</span>(x) - <span class="number">1</span>], <span class="number">7500</span> * s)  <span class="comment"># 新的插值区间及其点的个数</span></span><br><span class="line">    ipo3 = spi.splrep(x, y, k=<span class="number">3</span>)  <span class="comment"># 样本点导入，生成参数</span></span><br><span class="line">    hrv_interpolation = spi.splev(x_new, ipo3)  <span class="comment"># 根据观测点和样条参数，生成插值</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> hrv_interpolation</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重采样</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">resample</span>(<span class="params">input_signal, src_fs, tar_fs</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    :param input_signal:输入信号</span></span><br><span class="line"><span class="string">    :param src_fs:输入信号采样率</span></span><br><span class="line"><span class="string">    :param tar_fs:输出信号采样率</span></span><br><span class="line"><span class="string">    :return:输出信号</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    dtype = input_signal.dtype</span><br><span class="line">    audio_len = <span class="built_in">len</span>(input_signal)</span><br><span class="line">    audio_time_max = <span class="number">1.0</span> * audio_len / src_fs</span><br><span class="line">    src_time = <span class="number">1.0</span> * np.linspace(<span class="number">0</span>, audio_len, audio_len) / src_fs</span><br><span class="line">    tar_time = <span class="number">1.0</span> * np.linspace(<span class="number">0</span>, np.<span class="built_in">int</span>(audio_time_max*tar_fs), np.<span class="built_in">int</span>(audio_time_max*tar_fs)) / tar_fs</span><br><span class="line">    output_signal = np.interp(tar_time, src_time, input_signal).astype(dtype)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> output_signal</span><br></pre></td></tr></table></figure>



<h2 id="HRV的频域特征"><a href="#HRV的频域特征" class="headerlink" title="HRV的频域特征"></a>HRV的频域特征</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/6/8</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> hrvanalysis <span class="keyword">import</span> get_frequency_domain_features</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getfreq</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="built_in">all</span> = get_frequency_domain_features(x)</span><br><span class="line">    LF = <span class="built_in">all</span>[<span class="string">&#x27;lf&#x27;</span>]</span><br><span class="line">    HF = <span class="built_in">all</span>[<span class="string">&#x27;hf&#x27;</span>]</span><br><span class="line">    LF_HF = <span class="built_in">all</span>[<span class="string">&#x27;lf_hf_ratio&#x27;</span>]</span><br><span class="line">    LFnu = <span class="built_in">all</span>[<span class="string">&#x27;lfnu&#x27;</span>]</span><br><span class="line">    HFnu = <span class="built_in">all</span>[<span class="string">&#x27;hfnu&#x27;</span>]</span><br><span class="line">    total = <span class="built_in">all</span>[<span class="string">&#x27;total_power&#x27;</span>]</span><br><span class="line">    VLF = <span class="built_in">all</span>[<span class="string">&#x27;vlf&#x27;</span>]</span><br><span class="line">    freqs = [LF, HF, LF_HF, LFnu, HFnu, total, VLF]</span><br><span class="line">    <span class="keyword">return</span> freqs</span><br></pre></td></tr></table></figure>

<h2 id="HRV的非线性特征"><a href="#HRV的非线性特征" class="headerlink" title="HRV的非线性特征"></a>HRV的非线性特征</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/6/8</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> hrvanalysis <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> non_features <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">SD1</span>(<span class="params">x</span>):</span></span><br><span class="line">    sd = [x[i+<span class="number">1</span>] - x[i] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(x)<span class="number">-1</span>)]</span><br><span class="line">    <span class="keyword">return</span> np.std(sd) / np.sqrt(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">SD2</span>(<span class="params">x</span>):</span></span><br><span class="line">    sd = [x[i+<span class="number">1</span>] + x[i] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(x)<span class="number">-1</span>)]</span><br><span class="line">    <span class="keyword">return</span> np.std(sd) / np.sqrt(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">non_linear5</span>(<span class="params">x</span>):</span></span><br><span class="line">    RR_sd1 = SD1(x)</span><br><span class="line">    RR_sd2 = SD2(x)</span><br><span class="line">    RR_csi10 = csi(x, <span class="number">10</span>)</span><br><span class="line">    RR_csi30 = csi(x, <span class="number">30</span>)</span><br><span class="line">    RR_csi50 = csi(x, <span class="number">50</span>)</span><br><span class="line">    RR_csi100 = csi(x, <span class="number">100</span>)</span><br><span class="line">    RR_cvi = get_csi_cvi_features(x)[<span class="string">&#x27;cvi&#x27;</span>]</span><br><span class="line">    Modified_CSI10 = Modified_csi(x, <span class="number">10</span>)</span><br><span class="line">    Modified_CSI30 = Modified_csi(x, <span class="number">30</span>)</span><br><span class="line">    Modified_CSI50 = Modified_csi(x, <span class="number">50</span>)</span><br><span class="line">    Modified_CSI100 = Modified_csi(x, <span class="number">100</span>)</span><br><span class="line">    RR_apen = apen(x, m=<span class="number">2</span>, r=<span class="number">0.6</span>)</span><br><span class="line">    RR_spen = spen(x)</span><br><span class="line">    A = get_sampen(x)</span><br><span class="line">    RR_sampen = A[<span class="string">&#x27;sampen&#x27;</span>]</span><br><span class="line">    RR_lle = lle(x)</span><br><span class="line">    ALL_5 = [RR_sd1, RR_sd2, RR_sd2/RR_sd1, RR_csi10, RR_csi30, RR_csi50, RR_csi100, RR_cvi, Modified_CSI10,</span><br><span class="line">             Modified_CSI30, Modified_CSI50, Modified_CSI100, RR_apen, RR_spen, RR_sampen, RR_lle]</span><br><span class="line">    <span class="keyword">return</span> ALL_5</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">non_linear</span>(<span class="params">x</span>):</span></span><br><span class="line">    RR_sd1 = SD1(x)</span><br><span class="line">    RR_sd2 = SD2(x)</span><br><span class="line">    RR_csi10 = csi(x, <span class="number">10</span>)</span><br><span class="line">    RR_cvi = get_csi_cvi_features(x)[<span class="string">&#x27;cvi&#x27;</span>]</span><br><span class="line">    Modified_CSI10 = Modified_csi(x, <span class="number">10</span>)</span><br><span class="line">    RR_apen = apen(x, m=<span class="number">2</span>, r=<span class="number">0.6</span>)</span><br><span class="line">    RR_spen = spen(x)</span><br><span class="line">    RR_lle = lle(x)</span><br><span class="line">    RR_sampen = get_sampen(x)[<span class="string">&#x27;sampen&#x27;</span>]</span><br><span class="line">    ALL_30 = [RR_sd1, RR_sd2, RR_sd2/RR_sd1, RR_csi10, RR_cvi, Modified_CSI10, RR_apen, RR_spen, RR_lle, RR_sampen]</span><br><span class="line">    <span class="keyword">return</span> ALL_30</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/6/8</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Provides the non-linear functions for processing ECGs. Signals should be input</span></span><br><span class="line"><span class="string">as an np.array of R-R intervals. Arrays can be multi-dimensional as long as</span></span><br><span class="line"><span class="string">axis 1 moves through time (i.e. inputs should have shapes (n,) or (m, n)).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Includes function: csi (cardiac sympathatic index) apen (approximate entropy),</span></span><br><span class="line"><span class="string">spen (spectral entropy), lle (largest Lypunov exponent).</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> scipy.fftpack <span class="keyword">import</span> fft, ifft</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">csi</span>(<span class="params">intervals, num_points</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    From Geometry of the Poincare plot of RR intervals and its asymmetry in</span></span><br><span class="line"><span class="string">    healthy adults, J. Piskorski and P. Guzik; and A new method of assessing</span></span><br><span class="line"><span class="string">    cardiac autonomic function and its comparison with spectral analysis and</span></span><br><span class="line"><span class="string">    coefficient of variation of R--R interval, Motomi Toichi, Takeshi Sugiura</span></span><br><span class="line"><span class="string">    Toshiya Murai, and Akira Sengoku.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Cardiac Sympathetic Index (CSI). The poincare plot is method for visualizing</span></span><br><span class="line"><span class="string">    chaotic signals by plotting the peaks of a signal against the same peaks</span></span><br><span class="line"><span class="string">    delayed by one, for use with heart rate the peaks used are the R-R</span></span><br><span class="line"><span class="string">    intervals. This produces a ellipse aligned along the line x=y with major</span></span><br><span class="line"><span class="string">    and minor axes 4*SD2 and 4*SD1 respectively. The minor axis represents</span></span><br><span class="line"><span class="string">    variation between consecutive beats while the major axis represents</span></span><br><span class="line"><span class="string">    total beat difference. The CSI is given by SD2/SD1. Large CSI values</span></span><br><span class="line"><span class="string">    indicate relatively large inter-beat variation.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Parameters:</span></span><br><span class="line"><span class="string">        num_points (positive integer): The number of datapoints used to</span></span><br><span class="line"><span class="string">        calculate the CSI. Used as a window so the output will be of length</span></span><br><span class="line"><span class="string">        len(intervals) - num_points + 1.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    sd1, sd2 = _sd(intervals, num_points)</span><br><span class="line"></span><br><span class="line">    sd2[sd1 == <span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    sd1[sd1 == <span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    CSI = (sd2 / sd1).T</span><br><span class="line"><span class="comment">#     心交感指数CSI</span></span><br><span class="line"><span class="comment"># 庞加莱曲线图是一种将混沌信号可视化的方法，方法是将信号的峰值与延迟1的相同峰值相对照，用于心率。使用的峰值是R-R间隔。这会产生一个沿线x=y对齐的椭圆，长轴和短轴分别为4*sd2和4*sd1。短轴表示连续拍子之间的变化，而长轴表示总拍子差</span></span><br><span class="line"><span class="comment">#    找出最大的庞加莱曲线图</span></span><br><span class="line">    <span class="keyword">return</span> CSI.mean()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Modified_csi</span>(<span class="params">intervals, num_points</span>):</span></span><br><span class="line">    sd1, sd2 = _sd(intervals, num_points)</span><br><span class="line">    sd2[sd1 == <span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    sd1[sd1 == <span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    Modified_CSI = ((sd2 ** <span class="number">2</span>) / sd1).T</span><br><span class="line">    <span class="keyword">return</span> Modified_CSI.mean()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_sd</span>(<span class="params">intervals, num_points</span>):</span></span><br><span class="line">    axis = _function_dimension(intervals)</span><br><span class="line"></span><br><span class="line">    signal_length = intervals.shape[axis]</span><br><span class="line">    n = signal_length - num_points + <span class="number">1</span></span><br><span class="line">    indices = np.<span class="built_in">sum</span>(np.mgrid[<span class="number">0</span>:n, <span class="number">0</span>:num_points], axis=<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">if</span> axis == <span class="number">0</span>:</span><br><span class="line">        windowed_intervals = intervals[indices]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        windowed_intervals = intervals.swapaxes(<span class="number">0</span>, axis)[indices]</span><br><span class="line"></span><br><span class="line">    x = windowed_intervals[:<span class="number">-1</span>]</span><br><span class="line">    y = windowed_intervals[<span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_means</span>(<span class="params">x, y</span>):</span></span><br><span class="line">        mean_x = x.mean(axis=<span class="number">1</span>)</span><br><span class="line">        mean_y = y.mean(axis=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span>(mean_x, mean_y)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_transpose</span>(<span class="params">vals</span>):</span></span><br><span class="line">        <span class="keyword">if</span> axis == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> vals.T</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> vals.swapaxes(<span class="number">0</span>, axis)</span><br><span class="line"></span><br><span class="line">    mean_x, mean_y = _means(x, y)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_sd1</span>():</span></span><br><span class="line">        mean = _transpose(np.array([mean_y - mean_x]))</span><br><span class="line"></span><br><span class="line">        sd1 = np.std((x - y) + mean, axis=<span class="number">1</span>) / (<span class="number">2.0</span> ** <span class="number">0.5</span>)</span><br><span class="line">        <span class="keyword">return</span> sd1</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_sd2</span>():</span></span><br><span class="line">        mean = _transpose(np.array([mean_x + mean_y]))</span><br><span class="line"></span><br><span class="line">        sd2 = np.std((x + y) - mean, axis=<span class="number">1</span>) / (<span class="number">2.0</span> ** <span class="number">0.5</span>)</span><br><span class="line">        <span class="keyword">return</span> sd2</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>(_sd1(), _sd2())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apen</span>(<span class="params">intervals, m=<span class="number">2</span>, r=<span class="number">0.6</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Approximate Entropy (ApEn) as described in &quot;Physiological time-series</span></span><br><span class="line"><span class="string">    analysis what does regularity quantify?&quot; by Steven M. Pingus And Ary L.</span></span><br><span class="line"><span class="string">    Goldberger.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Vector x_i contains the ith heart rate to the (i + m - 1)th heart rate.</span></span><br><span class="line"><span class="string">    The distance between two vectors, x_i and x_j, is greater than r if</span></span><br><span class="line"><span class="string">    abs(x_i[k] - x_j[k]) &gt; r for any k = 0 ... (m - 1). A pair of vectors</span></span><br><span class="line"><span class="string">    (or groups), x_i and x_j, are said to be close if the distance between them</span></span><br><span class="line"><span class="string">    is less than r. C_i is the number of close groups of length m + 1 divided</span></span><br><span class="line"><span class="string">    by the number of close groups of length m.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Based on the definition of distance if the ith and jth group are close</span></span><br><span class="line"><span class="string">    when using length m + 1 then they must also be close when using a length of</span></span><br><span class="line"><span class="string">    only m. Therefore C is the probability heart rate i + m is close to heart</span></span><br><span class="line"><span class="string">    rate j + m given all m heart rates in groups i and j are also close.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    ApEn = phi^(m+1)(r) - phi^m(r) where phi^m(r) is the average of natural</span></span><br><span class="line"><span class="string">    log C_i, for all i groups, calculated using a group size of m.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Parameters:</span></span><br><span class="line"><span class="string">        m (positive int): group lengths.</span></span><br><span class="line"><span class="string">        r (float): max distance between close groups.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    heart_rates = <span class="number">1</span> / intervals.astype(np.float32)</span><br><span class="line"></span><br><span class="line">    num_close_groups_m = _find_num_close_groups(heart_rates, m, r)</span><br><span class="line">    num_close_groups_m_plus_1 = _find_num_close_groups(heart_rates, m+<span class="number">1</span>, r)</span><br><span class="line">    num_close_groups_m_plus_2 = _find_num_close_groups(heart_rates, m+<span class="number">2</span>, r)</span><br><span class="line"></span><br><span class="line">    C_m = num_close_groups_m_plus_1 / num_close_groups_m[:<span class="number">-1</span>]</span><br><span class="line">    C_m_plus_1 = num_close_groups_m_plus_2 / num_close_groups_m_plus_1[:<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">    phi = <span class="keyword">lambda</span> C: np.nanmean(np.log(C), axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> phi(C_m_plus_1) - phi(C_m)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_find_num_close_groups</span>(<span class="params">heart_rates, m, r</span>):</span></span><br><span class="line">    dim = _function_dimension(heart_rates)</span><br><span class="line"></span><br><span class="line">    err_msg = <span class="string">&#x27;Group lengths must be smaller than the signal length&#x27;</span></span><br><span class="line">    <span class="keyword">assert</span> m &lt; heart_rates.shape[dim], err_msg</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> dim == <span class="number">0</span>:</span><br><span class="line">        dist_mat = _one_dim_distance_matrix(heart_rates)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        dist_mat = _multi_dim_distance_matrix(heart_rates)</span><br><span class="line"></span><br><span class="line">    far_vals = np.logical_or(np.greater(dist_mat, r), np.less(dist_mat, -r))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> _sum_num_close_groups(far_vals, m).astype(np.float32)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_function_dimension</span>(<span class="params">x</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(x.shape) &gt; <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_one_dim_distance_matrix</span>(<span class="params">vals</span>):</span></span><br><span class="line">    repeats = np.tile(vals, (vals.shape[<span class="number">0</span>], <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">return</span> repeats - repeats.T</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_multi_dim_distance_matrix</span>(<span class="params">vals</span>):</span></span><br><span class="line">    vals = _rotate_and_repeat(vals)</span><br><span class="line">    <span class="keyword">return</span> vals - np.swapaxes(vals, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_rotate_and_repeat</span>(<span class="params">vals</span>):</span></span><br><span class="line">    vals = np.swapaxes(np.array([vals]), <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    size = vals.shape</span><br><span class="line">    new_size = (size[<span class="number">1</span>],) + size[<span class="number">1</span>:]</span><br><span class="line">    <span class="keyword">return</span> np.broadcast_to(vals, new_size)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_sum_num_close_groups</span>(<span class="params">group_dist_mat, m</span>):</span></span><br><span class="line">    <span class="keyword">return</span> np.<span class="built_in">sum</span>(_is_group_close(group_dist_mat, m), axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_is_group_close</span>(<span class="params">far_vals, m</span>):</span></span><br><span class="line">    close_groups = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> str_idx <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">        end_idx = m - str_idx</span><br><span class="line">        close_groups += far_vals[str_idx:-end_idx, str_idx:-end_idx]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> close_groups == <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">spen</span>(<span class="params">intervals</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Spectral Entropy (SpEn) is a measure of entropy based on the</span></span><br><span class="line"><span class="string">    probability mass distribution of the discreate Fourier transformation.</span></span><br><span class="line"><span class="string">    If a few frequencies dominate a signal the signal is predictable and</span></span><br><span class="line"><span class="string">    thus has a low entropy. SpEn uses log based 2 and can therefore be</span></span><br><span class="line"><span class="string">    interpreted as the min number of bits needed to encode the signals</span></span><br><span class="line"><span class="string">    power spectrum. Because of this length of the signal can affect the</span></span><br><span class="line"><span class="string">    outcome. &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    axis = _function_dimension(intervals)</span><br><span class="line"></span><br><span class="line">    spectrum = np.<span class="built_in">abs</span>(fft(intervals)) ** <span class="number">2</span></span><br><span class="line">    probs = spectrum / np.array([spectrum.<span class="built_in">sum</span>(axis=axis)]).T</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> - np.<span class="built_in">sum</span>(probs * np.log2(probs), axis=axis)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lle</span>(<span class="params">intervals</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; Largest Lypunov exponent (LLE) is a measure chaos within a signal.</span></span><br><span class="line"><span class="string">    If the LLE of a signal is positive the signal is determined to be chaotic.</span></span><br><span class="line"><span class="string">    The Lypunov exponent of each dimension represents how quickly two initially</span></span><br><span class="line"><span class="string">    close points move apart from one another.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    This method of calculating the LLE is based on M. Rosenstein, J. Collins,</span></span><br><span class="line"><span class="string">    and C. De Luca&#x27;s method from &quot;A practical method for calculating largest</span></span><br><span class="line"><span class="string">    Lypunov exponents from small data sets&quot;.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    dim = _function_dimension(intervals)</span><br><span class="line">    j = _calc_j_from_autocorr(intervals, dim)</span><br><span class="line">    <span class="keyword">return</span> j</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_calc_j_from_autocorr</span>(<span class="params">intervals, axis</span>):</span></span><br><span class="line"></span><br><span class="line">    Intervals = fft(intervals, axis=axis)</span><br><span class="line">    Corr = np.<span class="built_in">abs</span>(Intervals ** <span class="number">2</span>)</span><br><span class="line">    corr = ifft(Corr, axis=axis).real</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> axis <span class="keyword">is</span> <span class="number">0</span>:</span><br><span class="line">        corr = corr[:<span class="built_in">int</span>(<span class="built_in">len</span>(corr) / <span class="number">2</span>)] / corr[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        corr = corr[:, :corr.shape[<span class="number">1</span>] / <span class="number">2</span>] / np.array([corr[:, <span class="number">0</span>]]).T</span><br><span class="line"></span><br><span class="line">    diminish_factor = <span class="number">1</span> - <span class="number">1</span>/np.exp(<span class="number">1</span>)</span><br><span class="line">    lag_vals = np.<span class="built_in">abs</span>(corr - diminish_factor)</span><br><span class="line">    min_val = np.argmin(lag_vals, axis=axis)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> min_val</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://pic.wenwen.soso.com/p/20090717/20090717191255-665709535.jpg"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://esyyes.github.io/2020/06/08/HRV%E7%9A%8430s%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96/" data-id="ckh378yep0086l4ued5b5gyjn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/work/" rel="tag">work</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ECG-RR间期预处理" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/08/ECG-RR%E9%97%B4%E6%9C%9F%E9%A2%84%E5%A4%84%E7%90%86/" class="article-date">
  <time datetime="2020-06-08T09:46:48.000Z" itemprop="datePublished">2020-06-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/work/">work</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/08/ECG-RR%E9%97%B4%E6%9C%9F%E9%A2%84%E5%A4%84%E7%90%86/">ECG_RR间期预处理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="ECG-RR间期预处理"><a href="#ECG-RR间期预处理" class="headerlink" title="ECG_RR间期预处理"></a>ECG_RR间期预处理</h1><p>还是要用矫正后的R进行读取，所以第一个点进行查看<br>用矫正后的R间期序列，第一个点，就直接按照标注结果进行标注，直接不要第一个点，<br>数据点很多，而且分析的时候，第一个30s并没有进行分析</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/6/2</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">还是要用矫正后的R进行读取，所以第一个点进行查看</span></span><br><span class="line"><span class="string">用矫正后的R间期序列，第一个点，就直接按照标注结果进行标注，直接不要第一个点，</span></span><br><span class="line"><span class="string">数据点很多，而且分析的时候，第一个30s并没有进行分析</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> wfdb</span><br><span class="line"><span class="keyword">from</span> wfdb <span class="keyword">import</span> processing</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略警告</span></span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line"></span><br><span class="line">test = <span class="string">&#x27;slp01b&#x27;</span></span><br><span class="line">record = wfdb.rdrecord(<span class="string">&#x27;F:/slpdb_data/mitdata&#x27;</span> + <span class="string">&#x27;/%s&#x27;</span> % test, channels=[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取心电数据库的R峰值点</span></span><br><span class="line">annotation = wfdb.rdann(<span class="string">&#x27;F:/slpdb_data/mitdata&#x27;</span> + <span class="string">&#x27;/%s&#x27;</span> % test, <span class="string">&#x27;ecg&#x27;</span>)</span><br><span class="line">ecg_signal = record.p_signal</span><br><span class="line">ecg_locs = annotation.sample.tolist()</span><br><span class="line">ecg_locs.pop(<span class="number">0</span>)</span><br><span class="line"><span class="comment"># Correct the peaks shifting them to local maxima</span></span><br><span class="line">min_bpm = <span class="number">40</span></span><br><span class="line">max_bpm = <span class="number">200</span></span><br><span class="line"><span class="comment"># Use the maximum possible bpm as the search radius,进行平滑校准到峰值点位置</span></span><br><span class="line">search_radius = <span class="built_in">int</span>(record.fs * <span class="number">60</span> / max_bpm)</span><br><span class="line"><span class="comment"># 进行矫正后的峰值点信号坐标，用这个来进行后续的分析，虽然RR间期没什么影响，但是峰值点的值有很大的影响</span></span><br><span class="line">ecg_r_locs = processing.correct_peaks(ecg_signal[:, <span class="number">0</span>], peak_inds=ecg_locs,</span><br><span class="line">                                      search_radius=search_radius, smooth_window_size=<span class="number">100</span>)</span><br><span class="line"><span class="comment"># 峰值信号</span></span><br><span class="line">ecg_r_peaks = ecg_signal[ecg_r_locs].tolist()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 异常点处理，感觉可以不写，毕竟写了会出现R峰值无法对应的现象，会报错，到时可以写这个步骤，但是，没必要在程序中书写</span></span><br><span class="line"><span class="comment"># 30s切片</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in range(record.sig_len/record.fs/30 - 1):</span></span><br><span class="line">RR_30s = []</span><br><span class="line">locs_30s = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">30</span>*record.fs):</span><br><span class="line">    <span class="keyword">if</span> ecg_r_locs[i] &lt;= <span class="number">30</span>*record.fs:</span><br><span class="line">        locs_30s.append(ecg_r_locs[i])</span><br><span class="line">        RR_30s.append(ecg_r_locs[i+<span class="number">1</span>] - ecg_r_locs[i])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"><span class="comment"># 删除RR间期的最后一个，i+1数据超出了范围</span></span><br><span class="line">RR_30s.pop()</span><br><span class="line"><span class="comment"># 删除locs对应的第一个坐标，因为是用后面的R峰值点的坐标去对应RR波形</span></span><br><span class="line"><span class="keyword">del</span> locs_30s[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>

<h1 id="将30s的数据进行循环切片，然后进行输出为list"><a href="#将30s的数据进行循环切片，然后进行输出为list" class="headerlink" title="将30s的数据进行循环切片，然后进行输出为list"></a>将30s的数据进行循环切片，然后进行输出为list</h1><h1 id="30s的和5min的进行单独的分析，然后进行时频域和非线性的分析"><a href="#30s的和5min的进行单独的分析，然后进行时频域和非线性的分析" class="headerlink" title="30s的和5min的进行单独的分析，然后进行时频域和非线性的分析"></a>30s的和5min的进行单独的分析，然后进行时频域和非线性的分析</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/6/2</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将30s的数据进行循环切片，然后进行输出为list</span></span><br><span class="line"><span class="comment"># 30s的和5min的进行单独的分析，然后进行时频域和非线性的分析</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> wfdb</span><br><span class="line"><span class="keyword">from</span> wfdb <span class="keyword">import</span> processing</span><br><span class="line"><span class="comment"># import numpy as np</span></span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略警告</span></span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line"></span><br><span class="line">test = <span class="string">&#x27;slp01a&#x27;</span></span><br><span class="line">record = wfdb.rdrecord(<span class="string">&#x27;F:/slpdb_data/mitdata&#x27;</span> + <span class="string">&#x27;/%s&#x27;</span> % test, channels=[<span class="number">0</span>])</span><br><span class="line">annotation = wfdb.rdann(<span class="string">&#x27;F:/slpdb_data/mitdata&#x27;</span> + <span class="string">&#x27;/%s&#x27;</span> % test, <span class="string">&#x27;ecg&#x27;</span>)</span><br><span class="line">ecg_signal = record.p_signal</span><br><span class="line">ecg_locs = annotation.sample.tolist()</span><br><span class="line">ecg_locs.pop(<span class="number">0</span>)</span><br><span class="line">min_bpm = <span class="number">40</span></span><br><span class="line">max_bpm = <span class="number">200</span></span><br><span class="line"></span><br><span class="line">search_radius = <span class="built_in">int</span>(record.fs * <span class="number">60</span> / max_bpm)</span><br><span class="line">ecg_r_locs = processing.correct_peaks(ecg_signal[:, <span class="number">0</span>], peak_inds=ecg_locs,</span><br><span class="line">                                      search_radius=search_radius, smooth_window_size=<span class="number">100</span>)</span><br><span class="line"><span class="comment"># 峰值信号</span></span><br><span class="line">ecg_r_peaks = ecg_signal[ecg_r_locs].tolist()</span><br><span class="line"></span><br><span class="line">all_RR_30s = []</span><br><span class="line">all_locs_30s = []</span><br><span class="line">all_peaks_30s = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">int</span>(record.sig_len/record.fs/<span class="number">30</span> - <span class="number">1</span>)):</span><br><span class="line">    RR_30s = []</span><br><span class="line">    locs_30s = []</span><br><span class="line">    peaks_30s = []</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(ecg_r_locs)):</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">30</span>*record.fs*i) &lt;= ecg_r_locs[j] &lt;= (<span class="number">30</span>*record.fs*(i+<span class="number">1</span>)):</span><br><span class="line">            locs_30s.append(ecg_r_locs[j])</span><br><span class="line">            RR_30s.append((ecg_r_locs[j+<span class="number">1</span>] - ecg_r_locs[j]) * <span class="number">4</span>)</span><br><span class="line">            peaks_30s.append(ecg_r_peaks[j][<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">    RR_30s.pop()</span><br><span class="line">    all_RR_30s.append(RR_30s)</span><br><span class="line">    all_locs_30s.append(locs_30s)</span><br><span class="line">    all_peaks_30s.append(peaks_30s)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.wenwen.soso.com/p/20100306/20100306173003-1233891219.jpg"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://esyyes.github.io/2020/06/08/ECG-RR%E9%97%B4%E6%9C%9F%E9%A2%84%E5%A4%84%E7%90%86/" data-id="ckh378yba0006l4ue43yy6hvn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/work/" rel="tag">work</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ECG信号读取" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/08/ECG%E4%BF%A1%E5%8F%B7%E8%AF%BB%E5%8F%96/" class="article-date">
  <time datetime="2020-06-08T09:42:03.000Z" itemprop="datePublished">2020-06-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/work/">work</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/08/ECG%E4%BF%A1%E5%8F%B7%E8%AF%BB%E5%8F%96/">ECG信号读取</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="ECG信号读取"><a href="#ECG信号读取" class="headerlink" title="ECG信号读取"></a>ECG信号读取</h1><p>读取RR和st中的注释程序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/5/29</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 利用wfdb读取ECG数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> wfdb <span class="keyword">as</span> wfdb</span><br><span class="line"><span class="comment"># 读取slp01a的数据，sampfrom：起始位置，sampto：结束位置，即可写做</span></span><br><span class="line"><span class="comment"># record = wfdb.rdrecord(&#x27;F:/slpdb_data/mitdata/slp02a&#x27;, sampfrom=0, sampto=1500, channels=[0])</span></span><br><span class="line"><span class="comment"># 相当于已经把这个写成了一个类别，然后进行读取时，读取相关的属性就可以了。面向对象类别record.p_signal即为相关信号</span></span><br><span class="line"><span class="comment"># 读取注释文件</span></span><br><span class="line">annotation = wfdb.rdann(<span class="string">&#x27;F:/slpdb_data/mitdata/slp14&#x27;</span>, <span class="string">&#x27;st&#x27;</span>)</span><br><span class="line">aux = annotation.aux_note</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接读取注释的信息，然后进行判断即可，所以就可以不需要txt。直接用[][0]来进行判断睡眠分期</span></span><br><span class="line"><span class="comment"># 用【】【2】来判定是否是呼吸暂停</span></span><br><span class="line"><span class="comment"># aux[16][0]</span></span><br><span class="line"><span class="comment"># Out[13]: &#x27;1&#x27;</span></span><br><span class="line"><span class="comment"># aux[67][0]</span></span><br><span class="line"><span class="comment"># Out[14]: &#x27;M&#x27;</span></span><br><span class="line"><span class="comment"># aux[63][3]</span></span><br><span class="line"><span class="comment"># Out[15]: &#x27;A&#x27;</span></span><br><span class="line"><span class="comment"># aux[63][2]</span></span><br><span class="line"><span class="comment"># Out[16]: &#x27;H&#x27;</span></span><br><span class="line"><span class="comment"># aux[55][2]</span></span><br></pre></td></tr></table></figure>

<h2 id="标签处理"><a href="#标签处理" class="headerlink" title="标签处理"></a>标签处理</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/5/31</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> wfdb</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略警告</span></span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取st文件</span></span><br><span class="line">test = <span class="built_in">input</span>(<span class="string">&quot;请输入想读取的文件名： &quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># test = &#x27;slp14&#x27;</span></span><br><span class="line">annotation = wfdb.rdann(<span class="string">&#x27;F:/slpdb_data/mitdata&#x27;</span> + <span class="string">&#x27;/%s&#x27;</span> % test, <span class="string">&#x27;st&#x27;</span>)</span><br><span class="line">aux = annotation.aux_note</span><br><span class="line"><span class="comment"># record = wfdb.rdrecord(&#x27;F:/slpdb_data/mitdata&#x27; + &#x27;/%s&#x27; % test, sampfrom=1222500, sampto=1237500, channels=[3])</span></span><br><span class="line"><span class="comment"># ecg_signal = record.p_signal</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看低通气和osa阻塞性呼吸暂停的ecg信号取别</span></span><br><span class="line"><span class="comment"># 对标签进行处理。分为2个类别,就是正常和低通气。把osa判定为低通气</span></span><br><span class="line"></span><br><span class="line">tag1 = []</span><br><span class="line">tag2 = []</span><br><span class="line">tag3 = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(aux)):</span><br><span class="line">    <span class="keyword">if</span> (aux[i][<span class="number">0</span>] == <span class="string">&#x27;4&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">0</span>] == <span class="string">&#x27;3&#x27;</span>):</span><br><span class="line">        tag1.append(<span class="number">1</span>)</span><br><span class="line">        tag2.append(<span class="number">1</span>)</span><br><span class="line">        tag3.append(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">elif</span> aux[i][<span class="number">0</span>] == <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">        tag1.append(<span class="number">2</span>)</span><br><span class="line">        tag2.append(<span class="number">2</span>)</span><br><span class="line">        tag3.append(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">elif</span> aux[i][<span class="number">0</span>] == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">        tag1.append(<span class="number">3</span>)</span><br><span class="line">        tag2.append(<span class="number">2</span>)</span><br><span class="line">        tag3.append(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">elif</span> aux[i][<span class="number">0</span>] == <span class="string">&#x27;R&#x27;</span>:</span><br><span class="line">        tag1.append(<span class="number">4</span>)</span><br><span class="line">        tag2.append(<span class="number">3</span>)</span><br><span class="line">        tag3.append(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        tag1.append(<span class="number">5</span>)</span><br><span class="line">        tag2.append(<span class="number">4</span>)</span><br><span class="line">        tag3.append(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 即aux[i][2]:为低通气这些的判定，如果没有则认定为正常，有就进行判定</span></span><br><span class="line">tag4 = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(aux)):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(aux[i]) == <span class="number">1</span> <span class="keyword">or</span> <span class="built_in">len</span>(aux[i]) == <span class="number">2</span>:</span><br><span class="line">        tag4.append(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">elif</span> <span class="built_in">len</span>(aux[i]) &gt;= <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">if</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;H&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;X&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;O&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;C&#x27;</span>):</span><br><span class="line">            tag4.append(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            tag4.append(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">label1 = pd.DataFrame(tag1, columns=[<span class="string">&#x27;N321RW&#x27;</span>])</span><br><span class="line">label2 = pd.DataFrame(tag2, columns=[<span class="string">&#x27;DLRW&#x27;</span>])</span><br><span class="line">label4 = pd.DataFrame(tag4, columns=[<span class="string">&#x27;AHI&#x27;</span>])</span><br><span class="line">label3 = pd.DataFrame(tag3, columns=[<span class="string">&#x27;NRW&#x27;</span>])</span><br><span class="line"></span><br><span class="line">label = pd.concat([label1, label2, label3, label4], axis=<span class="number">1</span>)</span><br><span class="line">num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;输入保存的文件名： &quot;</span>))</span><br><span class="line">label.to_excel(<span class="string">&#x27;%d&#x27;</span> % num + <span class="string">&quot;.xlsx&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 即aux[i][2]:为低通气这些的判定，如果没有则认定为正常，有就进行判定</span></span><br><span class="line">tag4 = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(aux)):</span><br><span class="line"><span class="comment"># slp30和60有数据缺失    </span></span><br><span class="line">    <span class="comment"># if 174 &lt; i &lt; 194: # slp03</span></span><br><span class="line">    <span class="keyword">if</span> <span class="number">538</span> &lt; i &lt; <span class="number">549</span>:</span><br><span class="line">        <span class="comment"># slp60</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(aux[i]) == <span class="number">1</span> <span class="keyword">or</span> <span class="built_in">len</span>(aux[i]) == <span class="number">2</span>:</span><br><span class="line">            tag4.append(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">len</span>(aux[i]) &gt;= <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">if</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;H&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;X&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;O&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;C&#x27;</span>):</span><br><span class="line">                tag4.append(<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                tag4.append(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p><img src="http://pic41.nipic.com/20140528/2215192_185119636131_2.jpg"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://esyyes.github.io/2020/06/08/ECG%E4%BF%A1%E5%8F%B7%E8%AF%BB%E5%8F%96/" data-id="ckh378ybb000al4ue69oac14e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/work/" rel="tag">work</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sleep-apnea" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/31/sleep-apnea/" class="article-date">
  <time datetime="2020-05-31T07:43:01.000Z" itemprop="datePublished">2020-05-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/work/">work</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/31/sleep-apnea/">sleep apnea</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="sleep-apnea"><a href="#sleep-apnea" class="headerlink" title="sleep apnea"></a>sleep apnea</h1><p>诊断OSAS时,对有鼻炎、打鼾、张口呼吸、睡时慢性咳嗽、睡眠不安等高危症状的儿童,应给予高度重视。根据北京儿童医院睡眠中心推荐的儿童OSAS诊断标准,<strong>呼吸暂停为呼吸停止≥5秒或2个呼吸周期、暂停指数AI≥1次/小时</strong>;低通气指口鼻气流振幅较基线(气流停止或下降之前至少2分钟或3个呼吸周期的平均呼吸幅度)下降50%或持续2个呼吸周期以上,伴血氧饱和度降低3%以上或觉醒;呼吸暂停低通气指数<strong>AHI≥5次/小时可诊断为儿童OSAS,该指数5<del>10为轻度,10</del>20为中度,20以上为重度</strong>。通过病史、临床表现、放射学检查以及多导睡眠检测等方法,诊断OSAS并不困难,但要注意与原发性<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%BC%BE%E7%97%87">鼾症</a>鉴别诊断,后者无频繁觉醒,也无明确梗阻性睡眠呼吸暂停或气体交换异常。</p>
<p>成年人的睡眠呼吸暂停判定：</p>
<p>AHI(次数、小时)</p>
<p>轻度：AHI 5-14</p>
<p>中度： 15-29</p>
<p>重度： ≥30</p>
<p>直接根据AHI的平均值进行判定，只考虑AHI,OS这些全部判定为AHI。即可，直接先用这个特征进行提取，然后再考虑其他心电关于呼吸暂停的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/5/31</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> wfdb</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略警告</span></span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取st文件</span></span><br><span class="line">test = <span class="built_in">input</span>(<span class="string">&quot;请输入想读取的文件名： &quot;</span>)</span><br><span class="line">num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;输入保存的文件名： &quot;</span>))</span><br><span class="line"><span class="comment"># test = &#x27;slp14&#x27;</span></span><br><span class="line">annotation = wfdb.rdann(<span class="string">&#x27;F:/slpdb_data/mitdata&#x27;</span> + <span class="string">&#x27;/%s&#x27;</span> % test, <span class="string">&#x27;st&#x27;</span>)</span><br><span class="line">aux = annotation.aux_note</span><br><span class="line"><span class="comment"># record = wfdb.rdrecord(&#x27;F:/slpdb_data/mitdata&#x27; + &#x27;/%s&#x27; % test, sampfrom=1222500, sampto=1237500, channels=[3])</span></span><br><span class="line"><span class="comment"># ecg_signal = record.p_signal</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看低通气和osa阻塞性呼吸暂停的ecg信号取别</span></span><br><span class="line"><span class="comment"># 对标签进行处理。分为2个类别,就是正常和低通气。把osa判定为低通气</span></span><br><span class="line"></span><br><span class="line">tag1 = []</span><br><span class="line">tag2 = []</span><br><span class="line">tag3 = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(aux)):</span><br><span class="line">    <span class="keyword">if</span> (aux[i][<span class="number">0</span>] == <span class="string">&#x27;4&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">0</span>] == <span class="string">&#x27;3&#x27;</span>):</span><br><span class="line">        tag1.append(<span class="number">1</span>)</span><br><span class="line">        tag2.append(<span class="number">1</span>)</span><br><span class="line">        tag3.append(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">elif</span> aux[i][<span class="number">0</span>] == <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">        tag1.append(<span class="number">2</span>)</span><br><span class="line">        tag2.append(<span class="number">2</span>)</span><br><span class="line">        tag3.append(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">elif</span> aux[i][<span class="number">0</span>] == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">        tag1.append(<span class="number">3</span>)</span><br><span class="line">        tag2.append(<span class="number">2</span>)</span><br><span class="line">        tag3.append(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">elif</span> aux[i][<span class="number">0</span>] == <span class="string">&#x27;R&#x27;</span>:</span><br><span class="line">        tag1.append(<span class="number">4</span>)</span><br><span class="line">        tag2.append(<span class="number">3</span>)</span><br><span class="line">        tag3.append(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        tag1.append(<span class="number">5</span>)</span><br><span class="line">        tag2.append(<span class="number">4</span>)</span><br><span class="line">        tag3.append(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 即aux[i][2]:为低通气这些的判定，如果没有则认定为正常，有就进行判定</span></span><br><span class="line">tag4 = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(aux)):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(aux[i]) == <span class="number">1</span> <span class="keyword">or</span> <span class="built_in">len</span>(aux[i]) == <span class="number">2</span>:</span><br><span class="line">        tag4.append(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">elif</span> <span class="built_in">len</span>(aux[i]) &gt;= <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">if</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;H&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;X&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;O&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;C&#x27;</span>):</span><br><span class="line">            tag4.append(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            tag4.append(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">label1 = pd.DataFrame(tag1, columns=[<span class="string">&#x27;N321RW&#x27;</span>])</span><br><span class="line">label2 = pd.DataFrame(tag2, columns=[<span class="string">&#x27;DLRW&#x27;</span>])</span><br><span class="line">label3 = pd.DataFrame(tag3, columns=[<span class="string">&#x27;NRW&#x27;</span>])</span><br><span class="line">label4 = pd.DataFrame(tag4, columns=[<span class="string">&#x27;AHI&#x27;</span>])</span><br><span class="line"></span><br><span class="line">label = pd.concat([label1, label2, label3, label4], axis=<span class="number">1</span>)</span><br><span class="line">label.to_excel(<span class="string">&#x27;%d&#x27;</span> % num + <span class="string">&quot;.xlsx&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>首先对标签进行处理，睡眠分为3大主题。低通气和正常分为一类。</p>
<p><img src="http://img2.a0bi.com/upload/ttq/20150310/1425992493369.jpg"></p>
<p>slp03和slp60丢失了一段数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/6/8</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> wfdb</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"></span><br><span class="line"><span class="comment"># 忽略警告</span></span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取st文件</span></span><br><span class="line"><span class="comment"># test = input(&quot;请输入想读取的文件名： &quot;)</span></span><br><span class="line"></span><br><span class="line">test = <span class="string">&#x27;slp03&#x27;</span></span><br><span class="line"><span class="comment"># test = &#x27;slp60&#x27;</span></span><br><span class="line">annotation = wfdb.rdann(<span class="string">&#x27;F:/slpdb_data/mitdata&#x27;</span> + <span class="string">&#x27;/%s&#x27;</span> % test, <span class="string">&#x27;st&#x27;</span>)</span><br><span class="line">aux = annotation.aux_note</span><br><span class="line"><span class="comment"># record = wfdb.rdrecord(&#x27;F:/slpdb_data/mitdata&#x27; + &#x27;/%s&#x27; % test, sampfrom=1222500, sampto=1237500, channels=[3])</span></span><br><span class="line"><span class="comment"># ecg_signal = record.p_signal</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看低通气和osa阻塞性呼吸暂停的ecg信号取别</span></span><br><span class="line"><span class="comment"># 对标签进行处理。分为2个类别,就是正常和低通气。把osa判定为低通气</span></span><br><span class="line"></span><br><span class="line">tag1 = []</span><br><span class="line">tag2 = []</span><br><span class="line">tag3 = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(aux)):</span><br><span class="line">    <span class="keyword">if</span> (aux[i][<span class="number">0</span>] == <span class="string">&#x27;4&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">0</span>] == <span class="string">&#x27;3&#x27;</span>):</span><br><span class="line">        tag1.append(<span class="number">1</span>)</span><br><span class="line">        tag2.append(<span class="number">1</span>)</span><br><span class="line">        tag3.append(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">elif</span> aux[i][<span class="number">0</span>] == <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">        tag1.append(<span class="number">2</span>)</span><br><span class="line">        tag2.append(<span class="number">2</span>)</span><br><span class="line">        tag3.append(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">elif</span> aux[i][<span class="number">0</span>] == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">        tag1.append(<span class="number">3</span>)</span><br><span class="line">        tag2.append(<span class="number">2</span>)</span><br><span class="line">        tag3.append(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">elif</span> aux[i][<span class="number">0</span>] == <span class="string">&#x27;R&#x27;</span>:</span><br><span class="line">        tag1.append(<span class="number">4</span>)</span><br><span class="line">        tag2.append(<span class="number">3</span>)</span><br><span class="line">        tag3.append(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        tag1.append(<span class="number">5</span>)</span><br><span class="line">        tag2.append(<span class="number">4</span>)</span><br><span class="line">        tag3.append(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 即aux[i][2]:为低通气这些的判定，如果没有则认定为正常，有就进行判定</span></span><br><span class="line">tag4 = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(aux)):</span><br><span class="line">    <span class="comment"># if 174 &lt; i &lt; 194: # slp03</span></span><br><span class="line">    <span class="keyword">if</span> <span class="number">538</span> &lt; i &lt; <span class="number">549</span>:</span><br><span class="line">        <span class="comment"># slp60</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(aux[i]) == <span class="number">1</span> <span class="keyword">or</span> <span class="built_in">len</span>(aux[i]) == <span class="number">2</span>:</span><br><span class="line">            tag4.append(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">len</span>(aux[i]) &gt;= <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">if</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;H&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;X&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;O&#x27;</span>) <span class="keyword">or</span> (aux[i][<span class="number">2</span>] == <span class="string">&#x27;C&#x27;</span>):</span><br><span class="line">                tag4.append(<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                tag4.append(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">label1 = pd.DataFrame(tag1, columns=[<span class="string">&#x27;N321RW&#x27;</span>])</span><br><span class="line">label2 = pd.DataFrame(tag2, columns=[<span class="string">&#x27;DLRW&#x27;</span>])</span><br><span class="line">label4 = pd.DataFrame(tag4, columns=[<span class="string">&#x27;AHI&#x27;</span>])</span><br><span class="line">label3 = pd.DataFrame(tag3, columns=[<span class="string">&#x27;NRW&#x27;</span>])</span><br><span class="line"></span><br><span class="line">label = pd.concat([label1, label2, label3, label4], axis=<span class="number">1</span>)</span><br><span class="line">num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;输入保存的文件名： &quot;</span>))</span><br><span class="line">label.to_excel(<span class="string">&#x27;%d&#x27;</span> % num + <span class="string">&quot;.xlsx&quot;</span>)</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://esyyes.github.io/2020/05/31/sleep-apnea/" data-id="ckh378yde004pl4ue71y2di6e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/work/" rel="tag">work</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-面向对象版学员管理系统" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/28/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%89%88%E5%AD%A6%E5%91%98%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" class="article-date">
  <time datetime="2020-05-28T11:58:57.000Z" itemprop="datePublished">2020-05-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/28/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%89%88%E5%AD%A6%E5%91%98%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">面向对象版学员管理系统</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="面向对象版学员管理系统"><a href="#面向对象版学员管理系统" class="headerlink" title="面向对象版学员管理系统"></a>面向对象版学员管理系统</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/5/27</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">## 3.1 student.py</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">需求：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 学员信息包含：姓名、性别、手机号；</span></span><br><span class="line"><span class="string">- 添加`__str__`魔法方法，方便查看学员对象信息</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">分析：</span></span><br><span class="line"><span class="string">1.生成学生这个类别</span></span><br><span class="line"><span class="string">2.这个类别中的属性有 姓名、性别、手机号</span></span><br><span class="line"><span class="string">3.可以用__str__这个来进行赋值</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成学生这个类别</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">student</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="comment"># 初始化对象，设定对象带的属性，用__init__设置带类的对象的属性，self就是student</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, gender, tel</span>):</span></span><br><span class="line">        <span class="comment"># self.name就是带的小属性，name即可定义参数</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.gender = gender</span><br><span class="line">        self.tel = tel</span><br><span class="line">    <span class="comment"># def __str__(self):</span></span><br><span class="line">    <span class="comment"># 当使用print输出对象的时候，默认打印对象的内存地址。</span></span><br><span class="line">    <span class="comment"># 如果类定义了`__str__`方法，那么就会打印从在这个方法中 return 的数据。</span></span><br><span class="line">    <span class="comment"># 便于直接打印出内部的文件信息</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 返回的是要打印的内容</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;学生姓名：<span class="subst">&#123;self.name&#125;</span>, 性别：<span class="subst">&#123;self.gender&#125;</span>, 手机号：<span class="subst">&#123;self.tel&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重命名时不能命名为类的名字</span></span><br><span class="line"><span class="comment"># student1 = student(&#x27;zc&#x27;, &#x27;man&#x27;, &#x27;111&#x27;)</span></span><br><span class="line"><span class="comment"># print(student1)</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="生成管理系统这个类别："><a href="#生成管理系统这个类别：" class="headerlink" title="生成管理系统这个类别："></a>生成管理系统这个类别：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/5/28</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> student <span class="keyword">import</span> student</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">##  ManagerSystem.py</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">需求：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 存储数据的位置：文件(student.csv)</span></span><br><span class="line"><span class="string">  - 加载文件数据</span></span><br><span class="line"><span class="string">  - 修改数据后保存到文件</span></span><br><span class="line"><span class="string">- 存储数据的形式：列表存储学员对象</span></span><br><span class="line"><span class="string">- 系统功能</span></span><br><span class="line"><span class="string">  - 添加学员</span></span><br><span class="line"><span class="string">  - 删除学员</span></span><br><span class="line"><span class="string">  - 修改学员</span></span><br><span class="line"><span class="string">  - 查询学员信息</span></span><br><span class="line"><span class="string">  - 显示所有学员信息</span></span><br><span class="line"><span class="string">  - 保存学员信息</span></span><br><span class="line"><span class="string">  - 退出系统</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">需求：系统功能循环使用，用户输入不同的功能序号执行不同的功能。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 步骤</span></span><br><span class="line"><span class="string">  - 定义程序入口函数</span></span><br><span class="line"><span class="string">    - 加载数据</span></span><br><span class="line"><span class="string">    - 显示功能菜单</span></span><br><span class="line"><span class="string">    - 用户输入功能序号</span></span><br><span class="line"><span class="string">    - 根据用户输入的功能序号执行不同的功能</span></span><br><span class="line"><span class="string">  - 定义系统功能函数，添加、删除学员等</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">分析：</span></span><br><span class="line"><span class="string">1. 加载data文件</span></span><br><span class="line"><span class="string">需要对文件进行修改和保存</span></span><br><span class="line"><span class="string">2. 修改数据后保存到文件</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MangerSystem</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 列表存储学员对象</span></span><br><span class="line">        self.student_list = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 程序开始运行，进入界面</span></span><br><span class="line">        <span class="comment"># 加载student.data文件</span></span><br><span class="line">        self.load_student()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># while True 语句中一定要有结束该循环的break语句，否则会一直循环下去的。</span></span><br><span class="line">        <span class="comment"># 这是一个死循环，所以每次循环后输入都要去显示页面</span></span><br><span class="line">        <span class="comment"># 采用while True循环语句：</span></span><br><span class="line">        <span class="comment"># 根据输入的功能序号进行判断，然后运行功能</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="comment"># 显示界面的功能</span></span><br><span class="line">            self.show_menu()</span><br><span class="line">            <span class="comment"># 利用数字筛选系统的功能，供选择系统的功能，首先要确定你输入的数字是什么</span></span><br><span class="line">            <span class="comment"># 用int转换为整数形式，将这个功能赋值给菜单，然后用菜单里的内容进行比较，输入菜单的功能</span></span><br><span class="line">            menu_num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入你需要的功能序号：&#x27;</span>))</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> menu_num == <span class="number">1</span>:</span><br><span class="line">                <span class="comment"># 1- 添加学员</span></span><br><span class="line">                self.add_student()</span><br><span class="line">            <span class="keyword">elif</span> menu_num == <span class="number">2</span>:</span><br><span class="line">                <span class="comment"># 2- 删除学员</span></span><br><span class="line">                self.del_student()</span><br><span class="line">            <span class="keyword">elif</span> menu_num == <span class="number">3</span>:</span><br><span class="line">                <span class="comment"># 3 - 修改学员</span></span><br><span class="line">                self.modify_student()</span><br><span class="line">            <span class="keyword">elif</span> menu_num == <span class="number">4</span>:</span><br><span class="line">                <span class="comment"># 4 - 查询学员信息</span></span><br><span class="line">                self.search_student()</span><br><span class="line">            <span class="keyword">elif</span> menu_num == <span class="number">5</span>:</span><br><span class="line">                <span class="comment"># 5 - 显示所有学员信息</span></span><br><span class="line">                self.show_student()</span><br><span class="line">            <span class="keyword">elif</span> menu_num == <span class="number">6</span>:</span><br><span class="line">                <span class="comment"># 6 - 保存学员信息</span></span><br><span class="line">                self.save_student()</span><br><span class="line">            <span class="keyword">elif</span> menu_num == <span class="number">7</span>:</span><br><span class="line">                <span class="comment"># 7 - 退出系统</span></span><br><span class="line">                <span class="comment"># 跳出循环即可</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 显示菜单的功能，将对应序号表现出来，以供选择，静态的</span></span><br><span class="line">    <span class="comment"># 当方法中 **既不需要使用实例对象**(如实例对象，实例属性)，**也不需要使用类对象**</span></span><br><span class="line">    <span class="comment"># (如类属性、类方法、创建实例等)时，定义为静态方法</span></span><br><span class="line">    <span class="comment"># 用@staticmethod修饰</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show_menu</span>():</span></span><br><span class="line">        print(<span class="string">f&#x27;请选择以下功能： &#x27;</span>)</span><br><span class="line">        print(<span class="string">f&#x27;1: 添加学员&#x27;</span>)</span><br><span class="line">        print(<span class="string">f&#x27;2: 删除学员&#x27;</span>)</span><br><span class="line">        print(<span class="string">f&#x27;3: 修改学员信息&#x27;</span>)</span><br><span class="line">        print(<span class="string">f&#x27;4: 查询学员信息&#x27;</span>)</span><br><span class="line">        print(<span class="string">f&#x27;5: 显示所有学员信息&#x27;</span>)</span><br><span class="line">        print(<span class="string">f&#x27;6: 保存学员信息&#x27;</span>)</span><br><span class="line">        print(<span class="string">f&#x27;7: 退出系统&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 读取student中的数据</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">load_student</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            f = <span class="built_in">open</span>(<span class="string">&#x27;student.data&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">            print(<span class="string">f&#x27;成功打开文件&#x27;</span>)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            f = <span class="built_in">open</span>(<span class="string">&#x27;student.data&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">            print(<span class="string">f&#x27;没有该文件&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            data = f.read()</span><br><span class="line">            data_list = <span class="built_in">eval</span>(data)</span><br><span class="line">            <span class="comment"># 将学生的数据放入学生的类别中，student.py,参数写入student的属性(&#x27;name&#x27;, &#x27;gender&#x27;, &#x27;tel&#x27;)，将其赋值，并保存为list形式</span></span><br><span class="line">            <span class="comment"># 需要与student.py文件结合起来,需要导入那个文件中的student模块，类别</span></span><br><span class="line">            self.student_list = [student(i[<span class="string">&#x27;name&#x27;</span>], i[<span class="string">&#x27;gender&#x27;</span>], i[<span class="string">&#x27;tel&#x27;</span>]) <span class="keyword">for</span> i <span class="keyword">in</span> data_list]</span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            f.close()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 1-添加学员</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add_student</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 输入name gender tel</span></span><br><span class="line">        name = <span class="built_in">input</span>(<span class="string">&quot;请输入学员的姓名：&quot;</span>)</span><br><span class="line">        gender = <span class="built_in">input</span>(<span class="string">&quot;请输入学员的性别： &quot;</span>)</span><br><span class="line">        tel = <span class="built_in">input</span>(<span class="string">&quot;请输入学员的电话号码： &quot;</span>)</span><br><span class="line">        <span class="comment"># 将name gender tel放入student这个类别里面，作为一个字典，然后再叠加到student_list这个列表里面</span></span><br><span class="line">        student_in = student(name, gender, tel)</span><br><span class="line"></span><br><span class="line">        self.student_list.append(student_in)</span><br><span class="line">        <span class="comment"># 查看字典和列表</span></span><br><span class="line">        print(student_in)</span><br><span class="line">        print(self.student_list)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2-删除学员</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">del_student</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 输入你想删除学员的名字</span></span><br><span class="line">        del_name = <span class="built_in">input</span>(<span class="string">&quot;请输入你想删除的学员的名字： &quot;</span>)</span><br><span class="line">        <span class="comment"># 查找这个学员的名字在哪,用循环遍历出这个学员的所在</span></span><br><span class="line">        <span class="comment"># 然后删除这个学员的name gender tel，即在list中直接移除这个字典</span></span><br><span class="line">        <span class="comment"># 遍历出的每个字典都是student_in = student(name, gender, tel)，所以这个字典中的名字即可为i.name</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> self.student_list:</span><br><span class="line">            <span class="keyword">if</span> del_name == i.name:</span><br><span class="line">                self.student_list.remove(i)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 如果没有这个名字就输出这个</span></span><br><span class="line">            print(<span class="string">&#x27;没有这个学员&#x27;</span>)</span><br><span class="line">        <span class="comment"># 再打印出这个列表的值</span></span><br><span class="line">        print(self.student_list)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3- 修改学员信息</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">modify_student</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 输入你想修改的学员的名字,进行查找,然后修改里面的name,gender,tel</span></span><br><span class="line">        modify_name = <span class="built_in">input</span>(<span class="string">&quot;请输入你想修改的学员的名字： &quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> self.student_list:</span><br><span class="line">            <span class="keyword">if</span> modify_name == i.name:</span><br><span class="line">                i.name = <span class="built_in">input</span>(<span class="string">&quot;姓名修改：&quot;</span>)</span><br><span class="line">                i.gender = <span class="built_in">input</span>(<span class="string">&quot;性别修改：&quot;</span>)</span><br><span class="line">                i.tel = <span class="built_in">input</span>(<span class="string">&quot;电话修改为：&quot;</span>)</span><br><span class="line">                print(<span class="string">f&#x27;学员信息修改完毕。 姓名为<span class="subst">&#123;i.name&#125;</span>, 性别为：<span class="subst">&#123;i.gender&#125;</span>, 电话为：<span class="subst">&#123;i.tel&#125;</span>&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 如果没有这个名字就输出这个</span></span><br><span class="line">            print(<span class="string">&#x27;没有这个学员&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 4 - 查询学员信息</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search_student</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 输入你想查询的学员的名字,进行查找</span></span><br><span class="line">        search_name = <span class="built_in">input</span>(<span class="string">&quot;请输入你想查找的的学员的名字： &quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> self.student_list:</span><br><span class="line">            <span class="keyword">if</span> search_name == i.name:</span><br><span class="line">                print(<span class="string">f&#x27;姓名：<span class="subst">&#123;i.name&#125;</span>, 性别：<span class="subst">&#123;i.gender&#125;</span>, 电话：<span class="subst">&#123;i.tel&#125;</span>&#x27;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 如果没有这个名字就输出这个</span></span><br><span class="line">            print(<span class="string">&#x27;没有这个学员&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 5- 显示所有学员信息</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show_student</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># 用表格的形式展示</span></span><br><span class="line">        <span class="comment"># 打印表头</span></span><br><span class="line">        print(<span class="string">f&#x27;姓名\t性别\t电话&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> self.student_list:</span><br><span class="line">            <span class="comment"># 打印出表格内容</span></span><br><span class="line">            print(<span class="string">f&#x27;<span class="subst">&#123;i.name&#125;</span>\t<span class="subst">&#123;i.gender&#125;</span>\t<span class="subst">&#123;i.tel&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 6- 保存学员信息</span></span><br><span class="line">    <span class="comment"># 即将学员的信息写入student.data文件中</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">save_student</span>(<span class="params">self</span>):</span></span><br><span class="line">        f = <span class="built_in">open</span>(<span class="string">&#x27;student.data&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">        <span class="comment"># 将student_list中的内容更改后写入程序</span></span><br><span class="line">        <span class="comment"># 写入的内容必须是字符串</span></span><br><span class="line">        <span class="comment"># 直接写入的列表将会是一个字符串形式，但是不会进行单排的分页，所以需要将它一个一个的展开</span></span><br><span class="line">        <span class="comment"># new_list = []</span></span><br><span class="line">        <span class="comment"># for i in self.student_list:</span></span><br><span class="line">        <span class="comment">#     new_list.append(i.__dict__)</span></span><br><span class="line">        new_list = [i.__dict__ <span class="keyword">for</span> i <span class="keyword">in</span> self.student_list]</span><br><span class="line">        f.write(<span class="built_in">str</span>(new_list))</span><br><span class="line"></span><br><span class="line">        f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这个符号的意思</span></span><br><span class="line"><span class="comment"># __dict__?直接调用类别中的那列的字典</span></span><br><span class="line"><span class="comment"># 1. 定义类</span></span><br><span class="line"><span class="comment"># class A(object):</span></span><br><span class="line"><span class="comment">#     a = 0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     def __init__(self):</span></span><br><span class="line"><span class="comment">#         self.b = 1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># # 2. 创建对象</span></span><br><span class="line"><span class="comment"># aa = A()</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># # 3. 调用__dict__</span></span><br><span class="line"><span class="comment"># print(A.__dict__)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># print(aa.__dict__)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">try:</span></span><br><span class="line"><span class="string">    # 用只读的形式打开文件</span></span><br><span class="line"><span class="string">    f = open(&#x27;student.data&#x27;, &#x27;r&#x27;)</span></span><br><span class="line"><span class="string">    print(f&#x27;文件夹中有该文件&#x27;)</span></span><br><span class="line"><span class="string">except:</span></span><br><span class="line"><span class="string">    # 如果发生了异常，则在文件夹中创建一个新的文件，用w写入文件</span></span><br><span class="line"><span class="string">    f = open(&#x27;student.data&#x27;, &#x27;w&#x27;)</span></span><br><span class="line"><span class="string">    print(f&#x27;创建一个新的文件&#x27;)</span></span><br><span class="line"><span class="string">else:</span></span><br><span class="line"><span class="string">    # 没有异常才执行的语句，try能够运行才执行的语句</span></span><br><span class="line"><span class="string">    # f.read()读取文件夹中的参数，内容</span></span><br><span class="line"><span class="string">    data = f.read()</span></span><br><span class="line"><span class="string">    # 查看data内的参数内容</span></span><br><span class="line"><span class="string">    print(type(data))</span></span><br><span class="line"><span class="string">    # &#x27;[&#123;&#x27;name&#x27;: &#x27;aaa&#x27;, &#x27;gender&#x27;: &#x27;nan&#x27;, &#x27;tel&#x27;: &#x27;11111111&#x27;&#125;]&#x27;</span></span><br><span class="line"><span class="string">    # data是字符串形式，去除[]列表外的&#x27;&#x27;,使用eval，转换为list</span></span><br><span class="line"><span class="string">    data_list = eval(data)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    print(f&#x27;将字符串&#123;type(data)&#125;转换为列表&#123;type(data_list)&#125;:&#123;data_list&#125;&#x27;)</span></span><br><span class="line"><span class="string">    print(f&#x27;字典的key:&#123;data_list[0].keys()&#125;, 字典的values: &#123;data_list[0].values()&#125;&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    name = data_list[0][&#x27;name&#x27;]</span></span><br><span class="line"><span class="string">    gender = data_list[0][&#x27;gender&#x27;]</span></span><br><span class="line"><span class="string">    tel = data_list[0][&#x27;tel&#x27;]</span></span><br><span class="line"><span class="string">finally:</span></span><br><span class="line"><span class="string">    # 不管成功与否，关闭文件夹</span></span><br><span class="line"><span class="string">    f.close()</span></span><br><span class="line"><span class="string">for i in data_list:</span></span><br><span class="line"><span class="string">    print(i)</span></span><br><span class="line"><span class="string">    print(1)</span></span><br><span class="line"><span class="string">    self.student_list = [Student(i[&#x27;name&#x27;], i[&#x27;gender&#x27;], i[&#x27;tel&#x27;]) for i in new_list]</span></span><br><span class="line"><span class="string">    生成一个字典i: dict, &#123;&#x27;name&#x27;: &#x27;aaa&#x27;, &#x27;gender&#x27;: &#x27;nan&#x27;, &#x27;tel&#x27;: &#x27;11111111&#x27;&#125;</span></span><br><span class="line"><span class="string">    i[&#x27;name&#x27;] = value</span></span><br><span class="line"><span class="string">    # 然后将其赋值到student的属性里面</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="生成一个主程序进行运行"><a href="#生成一个主程序进行运行" class="headerlink" title="生成一个主程序进行运行"></a>生成一个主程序进行运行</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/5/28</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成一个主程序进行运行</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> MangerSystem <span class="keyword">import</span> *</span><br><span class="line"><span class="comment"># 已经在MangerSystem进行了调用</span></span><br><span class="line"><span class="comment"># from student import *</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 启动管理系统</span></span><br><span class="line"><span class="comment"># 保证是当前文件运行才启动管理系统：if --创建对象并调用run方法</span></span><br><span class="line"><span class="comment"># 每个python模块（python文件，也就是此处的 test.py 和 import_test.py）都包含内置的变量</span></span><br><span class="line"><span class="comment"># __name__，当该模块被直接执行的时候，__name__ 等于文件名（包含后缀 .py ）；</span></span><br><span class="line"><span class="comment"># 如果该模块 import 到其他模块中，则该模块的 __name__ 等于模块名称（不包含后缀.py）。</span></span><br><span class="line"><span class="comment"># 而 “__main__” 始终指当前执行模块的名称（包含后缀.py）。进而当模块被直接执行时，__name__ == &#x27;main&#x27; 结果为真。</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    student_manager = MangerSystem()</span><br><span class="line">    student_manager.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="生成的界面："><a href="#生成的界面：" class="headerlink" title="生成的界面："></a>生成的界面：</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">成功打开文件</span><br><span class="line">请选择以下功能： </span><br><span class="line"><span class="number">1</span>: 添加学员</span><br><span class="line"><span class="number">2</span>: 删除学员</span><br><span class="line"><span class="number">3</span>: 修改学员信息</span><br><span class="line"><span class="number">4</span>: 查询学员信息</span><br><span class="line"><span class="number">5</span>: 显示所有学员信息 不能进行<span class="keyword">break</span>,要不然会导致添加后跳出循环，无法查找到</span><br><span class="line"><span class="number">6</span>: 保存学员信息</span><br><span class="line"><span class="number">7</span>: 退出系统</span><br><span class="line">请输入你需要的功能序号：</span><br></pre></td></tr></table></figure>

<p><img src="https://pic.wenwen.soso.com/p/20111224/20111224100129-971797133.jpg"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://esyyes.github.io/2020/05/28/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%89%88%E5%AD%A6%E5%91%98%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" data-id="ckh378yef007vl4ue0mz99t4i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python-入门复习之模块和包" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/26/python-%E5%85%A5%E9%97%A8%E5%A4%8D%E4%B9%A0%E4%B9%8B%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85/" class="article-date">
  <time datetime="2020-05-26T10:43:10.000Z" itemprop="datePublished">2020-05-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/26/python-%E5%85%A5%E9%97%A8%E5%A4%8D%E4%B9%A0%E4%B9%8B%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85/">python-入门复习之模块和包</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="python-入门复习之模块和包"><a href="#python-入门复习之模块和包" class="headerlink" title="python-入门复习之模块和包"></a>python-入门复习之模块和包</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/5/26</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">模块</span></span><br><span class="line"><span class="string">Python 模块(Module)，是一个 Python 文件，以 .py 结尾，包含了 Python 对象定义和Python语句。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">模块能定义函数，类和变量，模块里也能包含可执行的代码。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">###  导入模块的方式</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- import 模块名</span></span><br><span class="line"><span class="string">- from 模块名 import 功能名</span></span><br><span class="line"><span class="string">- from 模块名 import *</span></span><br><span class="line"><span class="string">- import 模块名 as 别名</span></span><br><span class="line"><span class="string">- from 模块名 import 功能名 as 别名</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 1. 导入模块</span></span><br><span class="line"><span class="string">import 模块名</span></span><br><span class="line"><span class="string">import 模块名1, 模块名2...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 2. 调用功能</span></span><br><span class="line"><span class="string">模块名.功能名()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 1.1.2.2 from..import..</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 语法</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">``` python</span></span><br><span class="line"><span class="string">from 模块名 import 功能1, 功能2, 功能3...</span></span><br><span class="line"><span class="string">```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 体验</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">``` python</span></span><br><span class="line"><span class="string">from math import sqrt</span></span><br><span class="line"><span class="string">print(sqrt(9))</span></span><br><span class="line"><span class="string">```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 1.1.2.3 from .. import *</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 语法</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">``` python</span></span><br><span class="line"><span class="string">from 模块名 import *</span></span><br><span class="line"><span class="string">```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 体验</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">``` python</span></span><br><span class="line"><span class="string">from math import *</span></span><br><span class="line"><span class="string">print(sqrt(9))</span></span><br><span class="line"><span class="string">```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 1.1.2.4 as定义别名</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 语法</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">``` python</span></span><br><span class="line"><span class="string"># 模块定义别名</span></span><br><span class="line"><span class="string">import 模块名 as 别名</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 功能定义别名</span></span><br><span class="line"><span class="string">from 模块名 import 功能 as 别名</span></span><br><span class="line"><span class="string">```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 体验</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">``` python</span></span><br><span class="line"><span class="string"># 模块别名</span></span><br><span class="line"><span class="string">import time as tt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">tt.sleep(2)</span></span><br><span class="line"><span class="string">print(&#x27;hello&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 功能别名</span></span><br><span class="line"><span class="string">from time import sleep as sl</span></span><br><span class="line"><span class="string">sl(2)</span></span><br><span class="line"><span class="string">print(&#x27;hello&#x27;)</span></span><br><span class="line"><span class="string">```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">包将有联系的模块组织在一起，即放到同一个文件夹下，并且在这个文件夹创建一个名字为`__init__.py` 文件，那么这个文件夹就称之为包。</span></span><br><span class="line"><span class="string">## 2.1 制作包</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[New] — [Python Package] — 输入包名 — [OK] — 新建功能模块(有联系的模块)。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">注意：新建包后，包内部会自动创建`__init__.py`文件，这个文件控制着包的导入行为。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">import</span></span><br><span class="line"><span class="string">包名.模块名</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">包名.模块名.目标</span></span><br><span class="line"><span class="string">必须在`__init__.py`文件中添加`__all__ = []`，控制允许导入的模块列表。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 导入模块方法</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">``` python</span></span><br><span class="line"><span class="string">import 模块名</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">from 模块名 import 目标</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">from 模块名 import *</span></span><br><span class="line"><span class="string">```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 导入包</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">``` python</span></span><br><span class="line"><span class="string">import 包名.模块名</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">from 包名 import *</span></span><br><span class="line"><span class="string">```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- `__all__ = []` ：允许导入的模块或功能列表</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i01piccdn.sogoucdn.com/2d90c1f579748784"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://esyyes.github.io/2020/05/26/python-%E5%85%A5%E9%97%A8%E5%A4%8D%E4%B9%A0%E4%B9%8B%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85/" data-id="ckh378ycn0039l4ue634chi5e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python-入门复习之异常" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/26/python-%E5%85%A5%E9%97%A8%E5%A4%8D%E4%B9%A0%E4%B9%8B%E5%BC%82%E5%B8%B8/" class="article-date">
  <time datetime="2020-05-26T10:38:15.000Z" itemprop="datePublished">2020-05-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/26/python-%E5%85%A5%E9%97%A8%E5%A4%8D%E4%B9%A0%E4%B9%8B%E5%BC%82%E5%B8%B8/">python-入门复习之异常</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="python-入门复习之异常"><a href="#python-入门复习之异常" class="headerlink" title="python-入门复习之异常"></a>python-入门复习之异常</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/5/26</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">当检测到一个错误时，解释器就无法继续执行了，反而出现了一些错误的提示，这就是所谓的&quot;异常&quot;。</span></span><br><span class="line"><span class="string">异常的写法</span></span><br><span class="line"><span class="string">try:</span></span><br><span class="line"><span class="string">    可能发生错误的代码</span></span><br><span class="line"><span class="string">except:</span></span><br><span class="line"><span class="string">    如果出现异常执行的代码</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">捕获指定异常</span></span><br><span class="line"><span class="string">try:</span></span><br><span class="line"><span class="string">    可能发生错误的代码</span></span><br><span class="line"><span class="string">except 异常类型:</span></span><br><span class="line"><span class="string">    如果捕获到该异常类型执行的代码</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">try:</span></span><br><span class="line"><span class="string">    print(num)</span></span><br><span class="line"><span class="string">except NameError:</span></span><br><span class="line"><span class="string">    print(&#x27;有错误&#x27;)</span></span><br><span class="line"><span class="string">注意：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. 如果尝试执行的代码的异常类型和要捕获的异常类型不一致，则无法捕获异常。</span></span><br><span class="line"><span class="string">2. 一般try下方只放一行尝试执行的代码。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">当捕获多个异常时，可以把要捕获的异常类型的名字，放到except 后，并使用元组的方式进行书写。</span></span><br><span class="line"><span class="string">try:</span></span><br><span class="line"><span class="string">    print(1/0)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">except (NameError, ZeroDivisionError):</span></span><br><span class="line"><span class="string">    print(&#x27;有错误&#x27;)</span></span><br><span class="line"><span class="string">捕获异常描述信息</span></span><br><span class="line"><span class="string">try:</span></span><br><span class="line"><span class="string">    print(num)</span></span><br><span class="line"><span class="string">except (NameError, ZeroDivisionError) as result:</span></span><br><span class="line"><span class="string">    print(result)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">捕获所有异常</span></span><br><span class="line"><span class="string">Exception是所有程序异常类的父类。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">try:</span></span><br><span class="line"><span class="string">    print(num)</span></span><br><span class="line"><span class="string">except Exception as result:</span></span><br><span class="line"><span class="string">    print(result)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">else表示的是如果没有异常要执行的代码。</span></span><br><span class="line"><span class="string">try:</span></span><br><span class="line"><span class="string">    print(1)</span></span><br><span class="line"><span class="string">except Exception as result:</span></span><br><span class="line"><span class="string">    print(result)</span></span><br><span class="line"><span class="string">else:</span></span><br><span class="line"><span class="string">    print(&#x27;我是else，是没有异常的时候执行的代码&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">finally表示的是无论是否异常都要执行的代码</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">异常语法</span></span><br><span class="line"><span class="string">try:</span></span><br><span class="line"><span class="string">  	可能发生异常的代码</span></span><br><span class="line"><span class="string">except:</span></span><br><span class="line"><span class="string">  	如果出现异常执行的代码</span></span><br><span class="line"><span class="string">else:</span></span><br><span class="line"><span class="string">  	没有异常执行的代码</span></span><br><span class="line"><span class="string">finally:</span></span><br><span class="line"><span class="string">  	无论是否异常都要执行的代码</span></span><br><span class="line"><span class="string">捕获异常</span></span><br><span class="line"><span class="string">  	</span></span><br><span class="line"><span class="string">except 异常类型:</span></span><br><span class="line"><span class="string">  	代码</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">except 异常类型 as xx:</span></span><br><span class="line"><span class="string">		代码</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">自定义异常</span></span><br><span class="line"><span class="string"># 1. 自定义异常类</span></span><br><span class="line"><span class="string">class 异常类类名(Exception):</span></span><br><span class="line"><span class="string">  	代码</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    # 设置抛出异常的描述信息</span></span><br><span class="line"><span class="string">    def __str__(self):</span></span><br><span class="line"><span class="string">      return ...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 2. 抛出异常</span></span><br><span class="line"><span class="string">raise 异常类名()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 捕获异常</span></span><br><span class="line"><span class="string">except Exception...</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p><img src="http://i2.hdslb.com/bfs/archive/471e7d5ae35e9c08d40cff62982f9d6e1da9b456.jpg"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://esyyes.github.io/2020/05/26/python-%E5%85%A5%E9%97%A8%E5%A4%8D%E4%B9%A0%E4%B9%8B%E5%BC%82%E5%B8%B8/" data-id="ckh378ycg0034l4ue23avhpwr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python-入门复习面向对象" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/26/python-%E5%85%A5%E9%97%A8%E5%A4%8D%E4%B9%A0%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" class="article-date">
  <time datetime="2020-05-26T08:45:05.000Z" itemprop="datePublished">2020-05-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/26/python-%E5%85%A5%E9%97%A8%E5%A4%8D%E4%B9%A0%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">python-入门复习面向对象</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="python-入门复习面向对象"><a href="#python-入门复习面向对象" class="headerlink" title="python-入门复习面向对象"></a>python-入门复习面向对象</h1><p>很类似于数据库slpdb</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/5/26</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">面向对象基础</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">==面向对象就是将编程当成是一个事物，对外界来说，事物是直接使用的，不用去管他内部的情况。而编程就是设置事物能够做什么事。==</span></span><br><span class="line"><span class="string">类和对象的关系：用类去创建一个对象。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">类是对一系列具有相同==特征==和==行为==的事物的统称，是一个==抽象的概念==，不是真实存在的事物。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 特征即是属性</span></span><br><span class="line"><span class="string">- 行为即是方法</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">对象是类创建出来的真实存在的事物</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 定义类</span></span><br><span class="line"><span class="string">Python2中类分为：经典类 和 新式类</span></span><br><span class="line"><span class="string">class 类名():</span></span><br><span class="line"><span class="string">    代码</span></span><br><span class="line"><span class="string">    ......</span></span><br><span class="line"><span class="string">注意：类名要满足标识符命名规则，同时遵循==大驼峰命名习惯==。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class Washer():</span></span><br><span class="line"><span class="string">    def wash(self):</span></span><br><span class="line"><span class="string">        print(&#x27;我会洗衣服&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">不由任意内置类型派生出的类，称之为经典类</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class 类名:</span></span><br><span class="line"><span class="string">    代码</span></span><br><span class="line"><span class="string">    ......</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">创建对象</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">对象又名实例。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 语法</span></span><br><span class="line"><span class="string">对象名 = 类名()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 创建对象</span></span><br><span class="line"><span class="string">haier1 = Washer()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># &lt;__main__.Washer object at 0x0000018B7B224240&gt;</span></span><br><span class="line"><span class="string">print(haier1)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># haier对象调用实例方法</span></span><br><span class="line"><span class="string">haier1.wash()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">self指的是调用该函数的对象。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 1. 定义类</span></span><br><span class="line"><span class="string">class Washer():</span></span><br><span class="line"><span class="string">    def wash(self):</span></span><br><span class="line"><span class="string">        print(&#x27;我会洗衣服&#x27;)</span></span><br><span class="line"><span class="string">        # &lt;__main__.Washer object at 0x0000024BA2B34240&gt;</span></span><br><span class="line"><span class="string">        print(self)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 2. 创建对象</span></span><br><span class="line"><span class="string">haier1 = Washer()</span></span><br><span class="line"><span class="string"># &lt;__main__.Washer object at 0x0000018B7B224240&gt;</span></span><br><span class="line"><span class="string">print(haier1)</span></span><br><span class="line"><span class="string"># haier1对象调用实例方法</span></span><br><span class="line"><span class="string">haier1.wash()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">haier2 = Washer()</span></span><br><span class="line"><span class="string"># &lt;__main__.Washer object at 0x0000022005857EF0&gt;</span></span><br><span class="line"><span class="string">print(haier2)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">打印对象和self得到的结果是一致的，都是当前对象的内存中存储地址。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">对象名.属性名 = 值</span></span><br><span class="line"><span class="string">对象名.属性名</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">print(f&#x27;haier1洗衣机的宽度是&#123;haier1.width&#125;&#x27;)</span></span><br><span class="line"><span class="string">print(f&#x27;haier1洗衣机的高度是&#123;haier1.height&#125;&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">self.属性名</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 定义类</span></span><br><span class="line"><span class="string">class Washer():</span></span><br><span class="line"><span class="string">    def print_info(self):</span></span><br><span class="line"><span class="string">        # 类里面获取实例属性</span></span><br><span class="line"><span class="string">        print(f&#x27;haier1洗衣机的宽度是&#123;self.width&#125;&#x27;)</span></span><br><span class="line"><span class="string">        print(f&#x27;haier1洗衣机的高度是&#123;self.height&#125;&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 创建对象</span></span><br><span class="line"><span class="string">haier1 = Washer()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 添加实例属性</span></span><br><span class="line"><span class="string">haier1.width = 500</span></span><br><span class="line"><span class="string">haier1.height = 800</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">haier1.print_info()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">在Python中，`__xx__()`的函数叫做魔法方法，指的是具有特殊功能的函数。</span></span><br><span class="line"><span class="string">==`__init__()`方法的作用：初始化对象。==</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class Washer():</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    # 定义初始化功能的函数</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        # 添加实例属性</span></span><br><span class="line"><span class="string">        self.width = 500</span></span><br><span class="line"><span class="string">        self.height = 800</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def print_info(self):</span></span><br><span class="line"><span class="string">        # 类里面调用实例属性</span></span><br><span class="line"><span class="string">        print(f&#x27;洗衣机的宽度是&#123;self.width&#125;, 高度是&#123;self.height&#125;&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">haier1 = Washer()</span></span><br><span class="line"><span class="string">haier1.print_info()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">注意：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- `__init__()`方法，在创建一个对象时默认被调用，不需要手动调用</span></span><br><span class="line"><span class="string">- `__init__(self)`中的self参数，不需要开发者传递，python解释器会自动把当前的对象引用传递过去。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">一个类可以创建多个对象，如何对不同的对象设置不同的初始化属性呢？</span></span><br><span class="line"><span class="string">class Washer():</span></span><br><span class="line"><span class="string">    def __init__(self, width, height):</span></span><br><span class="line"><span class="string">        self.width = width</span></span><br><span class="line"><span class="string">        self.height = height</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def print_info(self):</span></span><br><span class="line"><span class="string">        print(f&#x27;洗衣机的宽度是&#123;self.width&#125;&#x27;)</span></span><br><span class="line"><span class="string">        print(f&#x27;洗衣机的高度是&#123;self.height&#125;&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">haier1 = Washer(10, 20)</span></span><br><span class="line"><span class="string">haier1.print_info()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">haier2 = Washer(30, 40)</span></span><br><span class="line"><span class="string">haier2.print_info()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">当使用print输出对象的时候，默认打印对象的内存地址。如果类定义了`__str__`方法，那么就会打印从在这个方法中 return 的数据。</span></span><br><span class="line"><span class="string">class Washer():</span></span><br><span class="line"><span class="string">    def __init__(self, width, height):</span></span><br><span class="line"><span class="string">        self.width = width</span></span><br><span class="line"><span class="string">        self.height = height</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def __str__(self):</span></span><br><span class="line"><span class="string">        return &#x27;这是海尔洗衣机的说明书&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">haier1 = Washer(10, 20)</span></span><br><span class="line"><span class="string"># 这是海尔洗衣机的说明书</span></span><br><span class="line"><span class="string">print(haier1)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">当删除对象时，python解释器也会默认调用`__del__()`方法。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">#  总结</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 面向对象重要组成部分</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 类</span></span><br><span class="line"><span class="string">    - 创建类</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ``` python</span></span><br><span class="line"><span class="string">  class 类名():</span></span><br><span class="line"><span class="string">    代码</span></span><br><span class="line"><span class="string">  ```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 对象</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ``` python</span></span><br><span class="line"><span class="string">  对象名 = 类名()</span></span><br><span class="line"><span class="string">  ```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 添加对象属性</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 类外面</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ``` python</span></span><br><span class="line"><span class="string">  对象名.属性名 = 值</span></span><br><span class="line"><span class="string">  ```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 类里面</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ``` python</span></span><br><span class="line"><span class="string">  self.属性名 = 值</span></span><br><span class="line"><span class="string">  ```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 获取对象属性</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 类外面</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ``` python</span></span><br><span class="line"><span class="string">  对象名.属性名</span></span><br><span class="line"><span class="string">  ```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 类里面</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ``` python</span></span><br><span class="line"><span class="string">  self.属性名</span></span><br><span class="line"><span class="string">  ```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 魔法方法</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - `__init__()`: 初始化</span></span><br><span class="line"><span class="string">  - `__str__()`:输出对象信息</span></span><br><span class="line"><span class="string">  - `__del__()`:删除对象时调用</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">class 类名(object):</span></span><br><span class="line"><span class="string">  代码</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 父类A</span></span><br><span class="line"><span class="string">class A(object):</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.num = 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def info_print(self):</span></span><br><span class="line"><span class="string">        print(self.num)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 子类B</span></span><br><span class="line"><span class="string">class B(A):</span></span><br><span class="line"><span class="string">    pass</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">result = B()</span></span><br><span class="line"><span class="string">result.info_print()  # 1</span></span><br><span class="line"><span class="string">在Python中，所有类默认继承object类，object类是顶级类或基类；其他子类叫做派生类</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">注意：当一个类有多个父类的时候，默认使用第一个父类的同名属性和方法。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">单继承</span></span><br><span class="line"><span class="string"># 1. 师父类</span></span><br><span class="line"><span class="string">class Master(object):</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.kongfu = &#x27;[古法煎饼果子配方]&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_cake(self):</span></span><br><span class="line"><span class="string">        print(f&#x27;运用&#123;self.kongfu&#125;制作煎饼果子&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string"># 2. 徒弟类</span></span><br><span class="line"><span class="string">class Prentice(Master):</span></span><br><span class="line"><span class="string">    pass</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 3. 创建对象daqiu</span></span><br><span class="line"><span class="string">daqiu = Prentice()</span></span><br><span class="line"><span class="string"># 4. 对象访问实例属性</span></span><br><span class="line"><span class="string">print(daqiu.kongfu)</span></span><br><span class="line"><span class="string"># 5. 对象调用实例方法</span></span><br><span class="line"><span class="string">daqiu.make_cake()</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"> 多继承</span></span><br><span class="line"><span class="string">class Master(object):</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.kongfu = &#x27;[古法煎饼果子配方]&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_cake(self):</span></span><br><span class="line"><span class="string">        print(f&#x27;运用&#123;self.kongfu&#125;制作煎饼果子&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 创建学校类</span></span><br><span class="line"><span class="string">class School(object):</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.kongfu = &#x27;[黑马煎饼果子配方]&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_cake(self):</span></span><br><span class="line"><span class="string">        print(f&#x27;运用&#123;self.kongfu&#125;制作煎饼果子&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class Prentice(School, Master):</span></span><br><span class="line"><span class="string">    pass</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">daqiu = Prentice()</span></span><br><span class="line"><span class="string">print(daqiu.kongfu)</span></span><br><span class="line"><span class="string">daqiu.make_cake()</span></span><br><span class="line"><span class="string">注意：当一个类有多个父类的时候，默认使用第一个父类的同名属性和方法。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">子类重写父类同名方法和属性</span></span><br><span class="line"><span class="string">class Master(object):</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.kongfu = &#x27;[古法煎饼果子配方]&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_cake(self):</span></span><br><span class="line"><span class="string">        print(f&#x27;运用&#123;self.kongfu&#125;制作煎饼果子&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class School(object):</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.kongfu = &#x27;[黑马煎饼果子配方]&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_cake(self):</span></span><br><span class="line"><span class="string">        print(f&#x27;运用&#123;self.kongfu&#125;制作煎饼果子&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 独创配方</span></span><br><span class="line"><span class="string">class Prentice(School, Master):</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.kongfu = &#x27;[独创煎饼果子配方]&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_cake(self):</span></span><br><span class="line"><span class="string">        print(f&#x27;运用&#123;self.kongfu&#125;制作煎饼果子&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">daqiu = Prentice()</span></span><br><span class="line"><span class="string">print(daqiu.kongfu)</span></span><br><span class="line"><span class="string">daqiu.make_cake()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">print(Prentice.__mro__)</span></span><br><span class="line"><span class="string">子类和父类具有同名属性和方法，默认使用子类的同名属性和方法。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">子类调用父类的同名方法和属性</span></span><br><span class="line"><span class="string">class Master(object):</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.kongfu = &#x27;[古法煎饼果子配方]&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_cake(self):</span></span><br><span class="line"><span class="string">        print(f&#x27;运用&#123;self.kongfu&#125;制作煎饼果子&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class School(object):</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.kongfu = &#x27;[黑马煎饼果子配方]&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_cake(self):</span></span><br><span class="line"><span class="string">        print(f&#x27;运用&#123;self.kongfu&#125;制作煎饼果子&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class Prentice(School, Master):</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.kongfu = &#x27;[独创煎饼果子配方]&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_cake(self):</span></span><br><span class="line"><span class="string">        # 如果是先调用了父类的属性和方法，父类属性会覆盖子类属性，故在调用属性前，先调用自己子类的初始化</span></span><br><span class="line"><span class="string">        self.__init__()</span></span><br><span class="line"><span class="string">        print(f&#x27;运用&#123;self.kongfu&#125;制作煎饼果子&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 调用父类方法，但是为保证调用到的也是父类的属性，必须在调用方法前调用父类的初始化</span></span><br><span class="line"><span class="string">    def make_master_cake(self):</span></span><br><span class="line"><span class="string">        Master.__init__(self)</span></span><br><span class="line"><span class="string">        Master.make_cake(self)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_school_cake(self):</span></span><br><span class="line"><span class="string">        School.__init__(self)</span></span><br><span class="line"><span class="string">        School.make_cake(self)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">daqiu = Prentice()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">daqiu.make_cake()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">daqiu.make_master_cake()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">daqiu.make_school_cake()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">daqiu.make_cake()</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&gt; 使用super() 可以自动查找父类。调用顺序遵循 `__mro__` 类属性的顺序。比较适合单继承使用。</span></span><br><span class="line"><span class="string">class Master(object):</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.kongfu = &#x27;[古法煎饼果子配方]&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_cake(self):</span></span><br><span class="line"><span class="string">        print(f&#x27;运用&#123;self.kongfu&#125;制作煎饼果子&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class School(Master):</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.kongfu = &#x27;[黑马煎饼果子配方]&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_cake(self):</span></span><br><span class="line"><span class="string">        print(f&#x27;运用&#123;self.kongfu&#125;制作煎饼果子&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        # 方法2.1</span></span><br><span class="line"><span class="string">        # super(School, self).__init__()</span></span><br><span class="line"><span class="string">        # super(School, self).make_cake()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        # 方法2.2</span></span><br><span class="line"><span class="string">        super().__init__()</span></span><br><span class="line"><span class="string">        super().make_cake()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class Prentice(School):</span></span><br><span class="line"><span class="string">    def __init__(self):</span></span><br><span class="line"><span class="string">        self.kongfu = &#x27;[独创煎饼果子技术]&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_cake(self):</span></span><br><span class="line"><span class="string">        self.__init__()</span></span><br><span class="line"><span class="string">        print(f&#x27;运用&#123;self.kongfu&#125;制作煎饼果子&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 子类调用父类的同名方法和属性：把父类的同名属性和方法再次封装</span></span><br><span class="line"><span class="string">    def make_master_cake(self):</span></span><br><span class="line"><span class="string">        Master.__init__(self)</span></span><br><span class="line"><span class="string">        Master.make_cake(self)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def make_school_cake(self):</span></span><br><span class="line"><span class="string">        School.__init__(self)</span></span><br><span class="line"><span class="string">        School.make_cake(self)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 一次性调用父类的同名属性和方法</span></span><br><span class="line"><span class="string">    def make_old_cake(self):</span></span><br><span class="line"><span class="string">        # 方法一：代码冗余；父类类名如果变化，这里代码需要频繁修改</span></span><br><span class="line"><span class="string">        # Master.__init__(self)</span></span><br><span class="line"><span class="string">        # Master.make_cake(self)</span></span><br><span class="line"><span class="string">        # School.__init__(self)</span></span><br><span class="line"><span class="string">        # School.make_cake(self)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        # 方法二: super()</span></span><br><span class="line"><span class="string">        # 方法2.1 super(当前类名, self).函数()</span></span><br><span class="line"><span class="string">        # super(Prentice, self).__init__()</span></span><br><span class="line"><span class="string">        # super(Prentice, self).make_cake()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        # 方法2.2 super().函数()</span></span><br><span class="line"><span class="string">        super().__init__()</span></span><br><span class="line"><span class="string">        super().make_cake()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">daqiu = Prentice()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">daqiu.make_old_cake()</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">- 继承的特点</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 子类默认拥有父类的所有属性和方法</span></span><br><span class="line"><span class="string">  - 子类重写父类同名方法和属性</span></span><br><span class="line"><span class="string">  - 子类调用父类同名方法和属性</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- super()方法快速调用父类方法</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 私有权限</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 不能继承给子类的属性和方法需要添加私有权限</span></span><br><span class="line"><span class="string">  - 语法</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class 类名():</span></span><br><span class="line"><span class="string">  # 私有属性</span></span><br><span class="line"><span class="string">  __属性名 = 值</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  # 私有方法</span></span><br><span class="line"><span class="string">  def __函数名(self):</span></span><br><span class="line"><span class="string">    代码</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">- 封装</span></span><br><span class="line"><span class="string">  - 将属性和方法书写到类的里面的操作即为封装</span></span><br><span class="line"><span class="string">  - 封装可以为属性和方法添加私有权限</span></span><br><span class="line"><span class="string">- 继承</span></span><br><span class="line"><span class="string">  - 子类默认继承父类的所有属性和方法</span></span><br><span class="line"><span class="string">  - 子类可以重写父类属性和方法</span></span><br><span class="line"><span class="string">- 多态</span></span><br><span class="line"><span class="string">  - 传入不同的对象，产生不同的结果</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">多态指的是一类事物有多种形态，（一个抽象类有多个子类，因而多态的概念依赖于继承）。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 定义：多态是一种使用对象的方式，子类重写父类方法，调用不同子类对象的相同父类方法，可以产生不同的执行结果</span></span><br><span class="line"><span class="string">- 好处：调用灵活，有了多态，更容易编写出通用的代码，做出通用的编程，以适应需求的不断变化！</span></span><br><span class="line"><span class="string">- 实现步骤：</span></span><br><span class="line"><span class="string">  - 定义父类，并提供公共方法</span></span><br><span class="line"><span class="string">  - 定义子类，并重写父类方法</span></span><br><span class="line"><span class="string">  - 传递子类对象给调用者，可以看到不同子类执行效果不同</span></span><br><span class="line"><span class="string">class Dog(object):</span></span><br><span class="line"><span class="string">    def work(self):  # 父类提供统一的方法，哪怕是空方法</span></span><br><span class="line"><span class="string">        print(&#x27;指哪打哪...&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class ArmyDog(Dog):  # 继承Dog类</span></span><br><span class="line"><span class="string">    def work(self):  # 子类重写父类同名方法</span></span><br><span class="line"><span class="string">        print(&#x27;追击敌人...&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class DrugDog(Dog):</span></span><br><span class="line"><span class="string">    def work(self):</span></span><br><span class="line"><span class="string">        print(&#x27;追查毒品...&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class Person(object):</span></span><br><span class="line"><span class="string">    def work_with_dog(self, dog):  # 传入不同的对象，执行不同的代码，即不同的work函数</span></span><br><span class="line"><span class="string">        dog.work()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ad = ArmyDog()</span></span><br><span class="line"><span class="string">dd = DrugDog()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">daqiu = Person()</span></span><br><span class="line"><span class="string">daqiu.work_with_dog(ad)</span></span><br><span class="line"><span class="string">daqiu.work_with_dog(dd)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">### 设置和访问类属性</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 类属性就是 **类对象** 所拥有的属性，它被 **该类的所有实例对象 所共有**。</span></span><br><span class="line"><span class="string">- 类属性可以使用 **类对象** 或 **实例对象** 访问。</span></span><br><span class="line"><span class="string">class Dog(object):</span></span><br><span class="line"><span class="string">    tooth = 10</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">wangcai = Dog()</span></span><br><span class="line"><span class="string">xiaohei = Dog()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">print(Dog.tooth)  # 10</span></span><br><span class="line"><span class="string">print(wangcai.tooth)  # 10</span></span><br><span class="line"><span class="string">print(xiaohei.tooth)  # 10</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">类属性的优点</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- **记录的某项数据 始终保持一致时**，则定义类属性。</span></span><br><span class="line"><span class="string">- **实例属性** 要求 **每个对象** 为其 **单独开辟一份内存空间** 来记录数据，而 **类属性** 为全类所共有 ，**仅占用一份内存**，**更加节省内存空间**。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">类属性只能通过类对象修改，不能通过实例对象修改，如果通过实例对象修改类属性，表示的是创建了一个实例属性。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 需要用装饰器`@classmethod`来标识其为类方法，对于类方法，**第一个参数必须是类对象**，一般以`cls`作为第一个参数。</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">### 类方法使用场景</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 当方法中 **需要使用类对象** (如访问私有类属性等)时，定义类方法</span></span><br><span class="line"><span class="string">- 类方法一般和类属性配合使用</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">### 静态方法特点</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 需要通过装饰器`@staticmethod`来进行修饰，**静态方法既不需要传递类对象也不需要传递实例对象（形参没有self/cls）**。</span></span><br><span class="line"><span class="string">- 静态方法 也能够通过 **实例对象** 和 **类对象** 去访问。</span></span><br><span class="line"><span class="string">静态方法使用场景</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 当方法中 **既不需要使用实例对象**(如实例对象，实例属性)，**也不需要使用类对象** (如类属性、类方法、创建实例等)时，定义静态方法</span></span><br><span class="line"><span class="string">- **取消不需要的参数传递**，有利于 **减少不必要的内存占用和性能消耗**</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">class Dog(object):</span></span><br><span class="line"><span class="string">    @staticmethod</span></span><br><span class="line"><span class="string">    def info_print():</span></span><br><span class="line"><span class="string">        print(&#x27;这是一个狗类，用于创建狗实例....&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">wangcai = Dog()</span></span><br><span class="line"><span class="string"># 静态方法既可以使用对象访问又可以使用类访问</span></span><br><span class="line"><span class="string">wangcai.info_print()</span></span><br><span class="line"><span class="string">Dog.info_print()</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">- 面向对象三大特性</span></span><br><span class="line"><span class="string">  - 封装</span></span><br><span class="line"><span class="string">  - 继承</span></span><br><span class="line"><span class="string">  - 多态</span></span><br><span class="line"><span class="string">- 类属性</span></span><br><span class="line"><span class="string">  - 归属于类对象的属性，所有对象共有的属性</span></span><br><span class="line"><span class="string">- 实例属性</span></span><br><span class="line"><span class="string">- 类方法</span></span><br><span class="line"><span class="string">@classmethod</span></span><br><span class="line"><span class="string">def xx():</span></span><br><span class="line"><span class="string">  代码</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">静态方法</span></span><br><span class="line"><span class="string">@staticmethod</span></span><br><span class="line"><span class="string">def xx():</span></span><br><span class="line"><span class="string">  代码</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="http://www.zhouyi.cc/uploads/allimg/151211/4-15121114503Q54.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://esyyes.github.io/2020/05/26/python-%E5%85%A5%E9%97%A8%E5%A4%8D%E4%B9%A0%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" data-id="ckh378ycs003fl4ue9z5m32v0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python-入门复习之文件读取" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/26/python-%E5%85%A5%E9%97%A8%E5%A4%8D%E4%B9%A0%E4%B9%8B%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96/" class="article-date">
  <time datetime="2020-05-26T05:55:41.000Z" itemprop="datePublished">2020-05-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/26/python-%E5%85%A5%E9%97%A8%E5%A4%8D%E4%B9%A0%E4%B9%8B%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96/">python_入门复习之文件读取</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="python-文件读取"><a href="#python-文件读取" class="headerlink" title="python-文件读取"></a>python-文件读取</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line">      <span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time     : 2020/5/26</span></span><br><span class="line"><span class="comment"># @Author   : esy</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">文件的基本操作 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 打开</span></span><br><span class="line"><span class="string">- 读写</span></span><br><span class="line"><span class="string">- 关闭</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">打开：</span></span><br><span class="line"><span class="string">在python，使用open函数，可以打开一个已经存在的文件，或者创建一个新文件，语法如下：</span></span><br><span class="line"><span class="string">open(name, mode)</span></span><br><span class="line"><span class="string">name：是要打开的目标文件名的字符串(可以包含文件所在的具体路径)。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">mode：设置打开文件的模式(访问模式)：只读、写入、追加等。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">| 模式 | 描述                                                         |</span></span><br><span class="line"><span class="string">| :--: | ------------------------------------------------------------ |</span></span><br><span class="line"><span class="string">|  r   | 以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。 |</span></span><br><span class="line"><span class="string">|  rb  | 以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。 |</span></span><br><span class="line"><span class="string">|  r+  | 打开一个文件用于读写。文件指针将会放在文件的开头。           |</span></span><br><span class="line"><span class="string">| rb+  | 以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。 |</span></span><br><span class="line"><span class="string">|  w   | 打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。 |</span></span><br><span class="line"><span class="string">|  wb  | 以二进制格式打开一个文件只用于写入。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。 |</span></span><br><span class="line"><span class="string">|  w+  | 打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。 |</span></span><br><span class="line"><span class="string">| wb+  | 以二进制格式打开一个文件用于读写。如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除。如果该文件不存在，创建新文件。 |</span></span><br><span class="line"><span class="string">|  a   | 打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。 |</span></span><br><span class="line"><span class="string">|  ab  | 以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。 |</span></span><br><span class="line"><span class="string">|  a+  | 打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。 |</span></span><br><span class="line"><span class="string">| ab+  | 以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。 |</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">f = open(&#x27;test.txt&#x27;, &#x27;w&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 1. 打开文件</span></span><br><span class="line"><span class="string">f = open(&#x27;test.txt&#x27;, &#x27;w&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 2.文件写入</span></span><br><span class="line"><span class="string">f.write(&#x27;hello world&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 3. 关闭文件</span></span><br><span class="line"><span class="string">f.close()</span></span><br><span class="line"><span class="string">注意：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. `w  `和`a`模式：如果文件不存在则创建该文件；如果文件存在，`w`模式先清空再写入，`a`模式直接末尾追加。</span></span><br><span class="line"><span class="string">2. `r`模式：如果文件不存在则报错。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">文件对象.read(num)</span></span><br><span class="line"><span class="string">&gt; num表示要从文件中读取的数据的长度（单位是字节），如果没有传入num，那么就表示读取文件中所有的数据。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">readlines可以按照行的方式把整个文件中的内容进行一次性读取，并且返回的是一个列表，其中每一行的数据为一个元素</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">f = open(&#x27;test.txt&#x27;)</span></span><br><span class="line"><span class="string">content = f.readlines()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># [&#x27;hello world\n&#x27;, &#x27;abcdefg\n&#x27;, &#x27;aaa\n&#x27;, &#x27;bbb\n&#x27;, &#x27;ccc&#x27;]</span></span><br><span class="line"><span class="string">print(content)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 关闭文件</span></span><br><span class="line"><span class="string">f.close()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">readline()一次读取一行内容。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">文件对象.seek(偏移量, 起始位置)</span></span><br><span class="line"><span class="string">起始位置：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 0：文件开头</span></span><br><span class="line"><span class="string">- 1：当前位置</span></span><br><span class="line"><span class="string">- 2：文件结尾</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">关闭</span></span><br><span class="line"><span class="string">文件对象.close()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">在Python中文件和文件夹的操作要借助os模块里面的相关功能，具体步骤如下：</span></span><br><span class="line"><span class="string">导入os模块</span></span><br><span class="line"><span class="string">import os</span></span><br><span class="line"><span class="string">使用`os`模块相关功能</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">os.函数名()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">文件重命名</span></span><br><span class="line"><span class="string">os.rename(目标文件名, 新文件名)</span></span><br><span class="line"><span class="string">删除文件</span></span><br><span class="line"><span class="string">os.remove(目标文件名)</span></span><br><span class="line"><span class="string">创建文件夹</span></span><br><span class="line"><span class="string">os.mkdir(文件夹名字)</span></span><br><span class="line"><span class="string">删除文件夹</span></span><br><span class="line"><span class="string">os.rmdir(文件夹名字)</span></span><br><span class="line"><span class="string">获取当前目录</span></span><br><span class="line"><span class="string">os.getcwd()</span></span><br><span class="line"><span class="string">改变默认目录</span></span><br><span class="line"><span class="string">os.chdir(目录)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">获取目录列表</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">os.listdir(目录)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">需求：批量修改文件名，既可添加指定字符串，又能删除指定字符串。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 步骤</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. 设置添加删除字符串的的标识</span></span><br><span class="line"><span class="string">2. 获取指定目录的所有文件</span></span><br><span class="line"><span class="string">3. 将原有文件名添加/删除指定字符串，构造新名字</span></span><br><span class="line"><span class="string">4. os.rename()重命名</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">import os</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 设置重命名标识：如果为1则添加指定字符，flag取值为2则删除指定字符</span></span><br><span class="line"><span class="string">flag = 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 获取指定目录</span></span><br><span class="line"><span class="string">dir_name = &#x27;./&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 获取指定目录的文件列表</span></span><br><span class="line"><span class="string">file_list = os.listdir(dir_name)</span></span><br><span class="line"><span class="string"># print(file_list)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 遍历文件列表内的文件</span></span><br><span class="line"><span class="string">for name in file_list:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 添加指定字符</span></span><br><span class="line"><span class="string">    if flag == 1:</span></span><br><span class="line"><span class="string">        new_name = &#x27;Python-&#x27; + name</span></span><br><span class="line"><span class="string">    # 删除指定字符</span></span><br><span class="line"><span class="string">    elif flag == 2:</span></span><br><span class="line"><span class="string">        num = len(&#x27;Python-&#x27;)</span></span><br><span class="line"><span class="string">        new_name = name[num:]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 打印新文件名，测试程序正确性</span></span><br><span class="line"><span class="string">    print(new_name)</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    # 重命名</span></span><br><span class="line"><span class="string">    os.rename(dir_name+name, dir_name+new_name)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"># 六. 总结</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 文件操作步骤</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 打开</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ``` python</span></span><br><span class="line"><span class="string">  文件对象 = open(目标文件, 访问模式)</span></span><br><span class="line"><span class="string">  ```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 操作</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    - 读</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    ``` python</span></span><br><span class="line"><span class="string">    文件对象.read()</span></span><br><span class="line"><span class="string">    文件对象.readlines()</span></span><br><span class="line"><span class="string">    文件对象.readline()</span></span><br><span class="line"><span class="string">    ```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    - 写</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    ``` python</span></span><br><span class="line"><span class="string">    文件对象.write()</span></span><br><span class="line"><span class="string">    ```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    - seek()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 关闭</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  ``` python</span></span><br><span class="line"><span class="string">  文件对象.close()</span></span><br><span class="line"><span class="string">  ```</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 主访问模式</span></span><br><span class="line"><span class="string">  - w：写，文件不存在则新建该文件</span></span><br><span class="line"><span class="string">  - r：读，文件不存在则报错</span></span><br><span class="line"><span class="string">  - a：追加</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 文件和文件夹操作</span></span><br><span class="line"><span class="string">  - 重命名：os.rename()</span></span><br><span class="line"><span class="string">  - 获取当前目录：os.getcwd()</span></span><br><span class="line"><span class="string">  - 获取目录列表：os.listdir()</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p><img src="http://img3.duitang.com/uploads/item/201405/02/20140502173129_G8kzT.jpeg"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://esyyes.github.io/2020/05/26/python-%E5%85%A5%E9%97%A8%E5%A4%8D%E4%B9%A0%E4%B9%8B%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96/" data-id="ckh378ycm0038l4uec9aeeeoa" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/6/">&amp;laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/8/">下一页 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/hexo%E5%AE%8C%E5%96%84/">-hexo完善</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/matlab-%E5%B7%A5%E4%BD%9C/">-matlab -工作</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python%E5%9F%BA%E7%A1%80/">-python基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8D%87%E7%BA%A7conda/">-升级conda</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E4%BD%9C/">-工作</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E4%BD%9C-matlab/">-工作 -matlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Graduation-work/">Graduation work</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mathematical-modeling/">mathematical modeling</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/matlab/">matlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nlp/">nlp</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/py-study/">py_study</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python%E5%9F%BA%E7%A1%80/">python基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/work/">work</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%B8%E6%88%8F%E4%BA%BA%E7%94%9F/">游戏人生</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/malab-%E6%AF%95%E4%B8%9A/" rel="tag">-malab -毕业</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">-python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python-%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" rel="tag">-python -人工智能</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" rel="tag">-个人博客搭建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Graduation-work/" rel="tag">Graduation work</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mathematical-modeling/" rel="tag">mathematical modeling</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nlp/" rel="tag">nlp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/py-study/" rel="tag">py_study</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/work/" rel="tag">work</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/malab-%E6%AF%95%E4%B8%9A/" style="font-size: 12px;">-malab -毕业</a> <a href="/tags/python/" style="font-size: 10px;">-python</a> <a href="/tags/python-%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 10px;">-python -人工智能</a> <a href="/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" style="font-size: 10px;">-个人博客搭建</a> <a href="/tags/Graduation-work/" style="font-size: 14px;">Graduation work</a> <a href="/tags/hexo/" style="font-size: 12px;">hexo</a> <a href="/tags/mathematical-modeling/" style="font-size: 16px;">mathematical modeling</a> <a href="/tags/nlp/" style="font-size: 12px;">nlp</a> <a href="/tags/py-study/" style="font-size: 10px;">py_study</a> <a href="/tags/python/" style="font-size: 18px;">python</a> <a href="/tags/work/" style="font-size: 20px;">work</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/11/04/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2020/11/03/%E5%88%86%E7%B1%BB%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87/">分类模型的评估指标</a>
          </li>
        
          <li>
            <a href="/2020/10/21/10-21-%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/">10-21 爬虫基础</a>
          </li>
        
          <li>
            <a href="/2020/09/25/CRF%E7%9A%84%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B%E7%BB%93%E6%9E%9C/">CRF的整体流程结果</a>
          </li>
        
          <li>
            <a href="/2020/09/25/nlp-crf%E6%A8%A1%E5%9E%8B/">nlp_crf模型</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 esy<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>